!function(e){function t(t){for(var n,o,l=t[0],c=t[1],s=t[2],m=0,d=[];m<l.length;m++)o=l[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,s||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={1:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=n);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(e){return o.p+""+({5:"tracker"}[e]||e)+".bundle.js"}(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(s);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",c.name="ChunkLoadError",c.type=n,c.request=i,a[1](c)}r[e]=void 0}};var s=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;i.push([245,0]),a()}({161:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),o=a.n(i),l=(a.p,a(161),a(21)),c=a(1),s=a.n(c),u=a(20),m=a.n(u),d=a(23),p=a(6),f=a.n(p),g=a(42),b=function(e){var t=e.children,a=Object(n.useRef)(null);return Object(n.useEffect)((function(){return a.current=document.createElement("div"),a.current.setAttribute("id","modal"),document.body.appendChild(a.current),function(){document.body.removeChild(a.current)}}),[]),a.current?o.a.createPortal(t,a.current):null},v=b;b.propTypes={children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node])},b.defaultProps={children:null};var h=a(2),E=a.n(h),y=a(8),O=a.n(y),w=function(){var e=Object(n.useState)(null),t=E()(e,2),a=t[0],r=t[1];return{modal:a,showModal:function(e,t,a){r({title:e,message:t,action:function(){a(),r(null)},cancel:function(){return r(null)}})}}},j=a(66),k=a(35),R=a(52),_=function(e){return 1===e.progressRatio&&!e.next},q=a(16);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=function(e,t){return e.find((function(e){return function(e,t){return e.qid===t.qid}(e,t)}))||{id:null,qid:null,start:null,next:null,operation:null,pending:null}},C=function(e,t){var a=e.findIndex((function(e){return e.qid===t.qid})),n=e[a+1];return n?{qid:n.qid,id:n.id}:{}},S=function(e,t){switch(t.type){case"add":var a="".concat(e.queue.length,"-").concat(t.item.id);return{active:e.active.hasOwnProperty("qid")?e.active:{id:t.item.id,qid:a},queue:[].concat(O()(e.queue),[P(P({status:"queued",progressRatio:0,qid:a},t.item),{},{reset:t.item.start})])};case"request":return P(P({},e),{},{queue:e.queue.map((function(e){return e.qid===t.item.qid?P(P({},e),{},f()({pending:!0,status:t.item.status},t.item.link,null)):e}))});case"update":return{active:t.item.next||t.item.qid!==e.active.qid?e.active:C(e.queue,e.active,t.item),queue:e.queue.map((function(e){return e.qid===t.item.qid&&"paused"!==e.status?P(P(P({},e),{},{start:null,next:null,pending:!1},t.item),{},{status:t.item.next?t.item.status:"completed"}):e}))};case"cleanup":return P(P({},e),{},{queue:e.queue.filter((function(e){return(e.start||e.next||e.pending)&&1!==e.progressRatio}))});case"remove":return{active:e.active&&e.active.qid===t.qid?C(e.queue,e.active):e.active,queue:e.queue.filter((function(e){return e.qid!==t.qid}))};case"reset":return{active:e.active,queue:e.queue.map((function(e){return e.qid===t.qid&&(e.start=e.reset,e.next=null,e.status="paused",e.pending=!1),e}))};case"clear":return{active:{},queue:[]};default:return e}},x=function(){var e=Object(n.useContext)(q.c).throwError,t=Object(k.a)(!0),a=E()(t,2),r=a[0],i=a[1],o=Object(k.a)(!1),l=E()(o,2),c=l[0],s=l[1],u=Object(n.useReducer)(S,{queue:[],active:{}}),m=E()(u,2),d=m[0],p=m[1],f=d.queue,g=d.active,b=T(f,g),v=b.start,h=b.next,y=b.pending,O=Object(j.a)({deferFn:R.b}),w=O.data,N=O.run,P=function(e){return e.every(_)}(f),C=function(e,t){return T(e,t).pending}(f,g);Object(n.useEffect)((function(){w&&p({type:"update",item:w})}),[w]),Object(n.useEffect)((function(){if(v&&r&&!c){var t=T(f,g),a=t.qid,n=t.start.href;y||(p({type:"request",item:{qid:a,link:"start",status:"started"}}),N({method:"POST",href:n,qid:a,throwError:e}))}}),[v,r]),Object(n.useEffect)((function(){if(h&&r&&!c){var t=T(f,g),a=t.qid,n=t.next.href;y||(p({type:"request",item:{qid:a,link:"next",status:"running"}}),N({method:"GET",href:n,qid:a,throwError:e}))}}),[h,r]),Object(n.useEffect)((function(){0!==f.length||r||i()}),[f.length]),Object(n.useEffect)((function(){P&&setTimeout((function(){p({type:"cleanup"})}),1500)}),[P]);return{active:g,queue:f,addToQueue:function(e){c&&s(),p({type:"add",item:e})},removeFromQueue:function(e){p({type:"remove",qid:e})},resetInQueue:function(e){p({type:"reset",qid:e})},clearQueue:function(){p({type:"clear"})},cleanupQueue:function(){p({type:"cleanup"})},isQueueRunning:r,setQueueRunning:i,setQueueClear:function(){c||s()},isQueueStopped:c,isQueueCompleted:P,isActivePending:C}},D=a(88),L=a(3),I=function(e){var t=Object(n.useState)(null),a=E()(t,2),r=a[0],i=a[1],o=Object(n.useState)(!1),l=E()(o,2),c=l[0],s=l[1];return Object(n.useEffect)((function(){e&&i(Object(L.w)(e)&&!c?e["initial-import"]:null)}),[e]),{initialImportLink:r,setInitialImporting:s,isInitialImporting:c}},M=function(e){var t=Object(n.useState)(null),a=E()(t,2),r=a[0],i=a[1],o=Object(n.useState)(!1),l=E()(o,2),c=l[0],s=l[1];return Object(n.useEffect)((function(){r&&(s(!0),Object(R.c)({href:r.href}).then((function(){s(!1)})))}),[r]),Object(n.useEffect)((function(){if(e){var t=Object(L.s)(e);i(t.length?t[0]:null)}}),[e]),{isRefreshing:c}},A=a(34),Q=a(92),F=a(67),U=a(9),W=a.n(U),z=a(10),H=a.n(z),V=a(25),Y=a.n(V),G=a(13),B=a.n(G),Z=a(14),X=a.n(Z),J=a(4),K=a.n(J);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=K()(e);if(t){var r=K()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return X()(this,a)}}var ee=function(e){B()(a,e);var t=$(a);function a(){return W()(this,a),t.apply(this,arguments)}return H()(a,[{key:"withValue",value:function(e){return new a({name:this.name,value:e})}},{key:"test",value:function(e){return Y()(K()(a.prototype),"test",this).call(this,[e.label])}}]),a}(a(68).a);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=function(e,t){var a=e.id,n=e.attributes,r=e.relationships,i=e.links,o=n.label,l=n.lastImported,c=n.processedCount,s=n.importedCount,u=n.totalCount,m=n.completed,d=n.stale,p=n.skipped,f=n.activity,g=r.dependencies,b=r.consistsOf,v={importedCount:Object(L.E)(s,u),processedCount:Object(L.E)(c,u),totalCount:u},h=Object(L.F)(ae(ae({},v),{},{completed:m,skipped:p,links:i}));return ae(ae({id:a,index:t,label:o,status:h,activity:f,lastImported:l},v),{},{completed:m,stale:d,skipped:p,dependencies:g.data.map((function(e){var t=e.meta.dependencyReasons;return{id:e.id,dependencyReasons:t}})),consistsOf:b.data.map((function(e){return{id:e.id}})),links:i})},re=[{name:"active",title:"In Progress",path:"/",to:"./",initialized:!1,columns:["actions","name","status","imported","messages","ops"],currentRows:[],filter:L.e,sort:L.M,showNew:L.B,allowedOps:["import","rollback"]},{name:"needsReview",title:"Needs Review",path:"needs-review",to:"needs-review",initialized:!1,columns:["actions","name","imported","messages","lastImported","ops"],currentRows:[],filter:L.d,sort:L.N,showNew:L.B,allowedOps:["rollback"]},{name:"completed",title:"Completed",path:"completed",to:"completed",initialized:!1,columns:["actions","name","imported","messages","lastImported","ops"],currentRows:[],filter:function(e){return e.filter((function(e){return e.completed}))},sort:L.N,showNew:L.B,allowedOps:["rollback"]},{name:"skipped",title:"Skipped",path:"skipped",to:"skipped",initialized:!1,columns:["name","imported","messages","ops"],currentRows:[],filter:function(e){return e.filter((function(e){return e.skipped}))},sort:L.M,showNew:L.B},{name:"refresh",title:"Refresh",path:"refresh",to:"refresh",initialized:!1,columns:["actions","name","status","imported"],currentRows:[],filter:L.c,sort:L.M,showNew:L.C,allowedOps:["refresh"]}],ie=function(e,t){if("remove"===t.type)return e.map((function(e){return e.name===t.page?function(e,t){var a=e.currentRows.find((function(e){return e.id===t&&"removed"===e.status}));return a?ae(ae({},e),{},{currentRows:e.currentRows.filter((function(e){return e.key!==a.key}))}):e}(e,t.id):e}));if("reset"===t.type){var a=e.find((function(e){return e.name===t.page})).currentRows.filter((function(e){return"new"===e.status})).map((function(e){return e.id}));return e.map((function(e){return e.name===t.page?function(e){return ae(ae({},e),{},{currentRows:O()(e.currentRows.map((function(e){return"new"===e.status?ae(ae({},e),{},{status:"initial"}):e})))})}(e):function(e,t){var a=e.currentRows.filter((function(e){return t.includes(e.id)&&"removed"===e.status})).map((function(e){return e.key}));return a.length?ae(ae({},e),{},{currentRows:e.currentRows.filter((function(e){return!a.includes(e.key)}))}):e}(e,a)}))}var n,r;return n=e,r=t.migrations,n.reduce((function(e,t){var a=t.filter(r),n=Date.now();if(t.initialized){var i=t.currentRows.filter((function(e){return"removed"!==e.status})).map((function(e){return e.id})),o=a.map((function(e){return e.id})),l=i.filter((function(e){return!o.includes(e)})),c=o.filter((function(e){return!i.includes(e)}));c.length&&(t.currentRows=t.sort([].concat(O()(t.currentRows),O()(a.filter((function(e){return c.includes(e.id)})).map((function(e){return{key:"".concat(e.id,"-added-").concat(n),id:e.id,label:e.label,index:e.index,lastImported:e.lastImported,page:t.name,status:"new",hasRefresh:e.links.hasOwnProperty("refresh")}})))))),l.length&&(t.currentRows=t.sort(t.currentRows.map((function(e){return l.includes(e.id)?ae(ae({},e),{},{status:"removed"}):e}))))}else t.currentRows=t.sort(a.map((function(e){return{key:"".concat(e.id,"-").concat(n),id:e.id,label:e.label,index:e.index,lastImported:e.lastImported,page:t.name,status:"initial",hasRefresh:e.links.hasOwnProperty("refresh")}})));return t.activeCount=t.currentRows.filter((function(e){return"removed"!==e.status})).length,t.initialized||(t.initialized=!0),[].concat(O()(e),[t])}),[])},oe=r.a.createContext({}),le=function(e){var t=e.basepath,a=e.basepathModule,i=e.basepathPreselect,o=e.source,l=e.cloudURL,c=e.children,s=Object(n.useState)([]),u=E()(s,2),m=u[0],d=u[1],p=Object(n.useState)(null),f=E()(p,2),g=f[0],b=f[1],v=I(g),h=v.initialImportLink,y=v.setInitialImporting,O=v.isInitialImporting,j=Object(F.a)({searchTitle:new ee({name:"searchTitle",value:""})}),k=j.limiters,_=j.updateLimiter,N=w(),P=N.modal,T=N.showModal,C=Object(n.useReducer)(ie,re),S=E()(C,2),U=S[0],W=S[1],z=x(),H=z.active,V=z.queue,Y=z.addToQueue,G=z.removeFromQueue,B=z.resetInQueue,Z=z.clearQueue,X=z.cleanupQueue,J=z.isQueueRunning,K=z.setQueueRunning,$=z.setQueueClear,te=z.isQueueStopped,ae=z.isQueueCompleted,le=z.isActivePending,ce=!O&&(ae||0===V.length),se=Object(D.a)(g).bulkUpdateMigrations,ue=Object(n.useContext)(q.c).throwError,me=M(g).isRefreshing,de=Object(Q.a)({href:o,handleError:ue}),pe=de.isLoading,fe=de.document,ge=Object(A.a)(),be=Object(n.useState)(null),ve=E()(be,2),he=ve[0],Ee=ve[1],ye=H?Object(L.i)(H.id,m):null,Oe=ye&&Object(L.A)(ye.links,"stop")?ye.links.stop:null,we=Oe?Oe.href:null,je=function(e){var t=e.link,a=e.toggle,n=void 0===a?function(){}:a,r=e.callback,i=void 0===r?function(){}:r,o=e.onError,l=void 0===o?function(){}:o,c=t.href,s=t.rel,u=t.title,m=t.params,d=Object(L.h)(s);if(d){var p=m.confirm,f=m.data,g=function(){n(),Object(R.d)({href:c,method:d,payload:{data:f}}).then((function(e){n(),e.ok?i():l()}))};p?T(u,p,g):g()}else console.error("No method found for rel",s)};return Object(n.useEffect)((function(){fe&&(b(fe.links),d(fe.data.map(ne)))}),[fe]),Object(n.useEffect)((function(){m.length&&W({type:"update",migrations:m})}),[m]),Object(n.useEffect)((function(){if(he){if(ge)return B(he),void Ee(null);je({link:Oe,callback:function(){B(he),Ee(null)},onError:function(){console.error("Error stopping migration ".concat(he)),Ee(null)}})}}),[he]),Object(n.useEffect)((function(){if(!J&&Oe){var e=H.qid;Ee(e)}}),[J,we]),Object(n.useEffect)((function(){te&&(Oe?je({link:Oe,callback:Z}):Z())}),[te]),r.a.createElement(oe.Provider,{value:{lists:U,links:g,initialImportLink:h,setInitialImporting:y,isInitialImporting:O,isRefreshing:me,migrations:m,limiters:k,updateLimiter:_,modal:P,updateMigration:je,removeFromList:function(e,t){W({type:"remove",id:e,page:t})},resetList:function(e){W({type:"reset",page:e}),X()},active:H,activeStopLink:Oe,queue:V,addToQueue:Y,removeFromQueue:G,isQueueRunning:J,setQueueRunning:K,setQueueClear:$,isQueueStopped:te,isQueueCompleted:ae,isActivePending:le,safeToCloseApp:ce,basepath:t,basepathModule:a,basepathPreselect:i,cloudURL:l,isLoading:pe,bulkUpdateMigrations:se}},c)};le.propTypes={basepath:s.a.string.isRequired,basepathModule:s.a.string.isRequired,basepathPreselect:s.a.string.isRequired,source:s.a.string.isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var ce=function(e){var t=e.id,a=e.previewable,i=e.children,o=Object(n.useContext)(oe).basepath;return r.a.createElement("div",{className:"migration__title"},r.a.createElement(l.a,{title:i,to:"".concat(o,"/migration/").concat(t).concat(a?"/preview":"")},i))},se=ce;ce.propTypes={id:s.a.string.isRequired,previewable:s.a.bool,children:s.a.string},ce.defaultProps={previewable:!1,children:""};var ue=function(e){var t=e.one,a=e.two;return r.a.createElement("div",{className:"layout-row clearfix"},r.a.createElement("div",{className:"layout-column layout-column--half"},t),r.a.createElement("div",{className:"layout-column layout-column--half"},a))},me=ue;ue.propTypes={one:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),two:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node])},ue.defaultProps={one:null,two:null};var de=function(e){var t=e.header,a=e.padding,n=e.children;return r.a.createElement("div",{className:"panel"},t&&r.a.createElement("h3",{className:"panel__title"},t),a?r.a.createElement("div",{className:"panel__content"},n):n)},pe=de;de.propTypes={header:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),padding:s.a.bool,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired},de.defaultProps={header:null,padding:!0};var fe=function(e){var t=e.dependencies,a=e.consistsOf,i=e.track;return Object(n.useEffect)((function(){i("User viewed details")}),[]),r.a.createElement(me,{one:r.a.createElement(pe,{header:"Dependencies"},t.length?r.a.createElement("ul",{className:"migration__details_dependencies admin-list--panel admin-list"},t.map((function(e){return r.a.createElement("li",{key:e.id,className:"admin-item--panel"},r.a.createElement("h5",null,r.a.createElement(se,{id:e.id},e.label)),e.dependencyReasons&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"".concat(e.id,"-migrations")},"Because of:"),r.a.createElement("ul",{id:"".concat(e.id,"-migrations")},e.dependencyReasons.map((function(t){return r.a.createElement("li",{key:"".concat(e.id,"-").concat(t)},r.a.createElement("code",null,t))})))))}))):r.a.createElement("div",{className:"messages messages--warning"},r.a.createElement("p",null,"No dependencies found."))),two:r.a.createElement(pe,{header:"Underlying Migrations"},a.length?r.a.createElement("ul",{className:"migration__details_underlying admin-list--panel admin-list"},a.map((function(e){return r.a.createElement("li",{key:e.id,className:"admin-item--panel"},r.a.createElement("code",null,e.id))}))):r.a.createElement("p",null,r.a.createElement("em",null,"No underlying migrations listed.")))})},ge=fe;fe.propTypes={dependencies:s.a.arrayOf(s.a.shape({id:s.a.string})),consistsOf:s.a.arrayOf(s.a.shape({id:s.a.string})),track:s.a.func},fe.defaultProps={dependencies:[],consistsOf:[],track:function(){}};var be=a(49),ve=a.n(be),he=function(e){var t=e.value;return Object(L.G)(t).split("; ").map((function(e,t){return r.a.createElement("code",{key:t},e)}))},Ee=function(e){var t=e.row;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("code",null,t.sourceFieldName)," →"," ",r.a.createElement("code",null,t.destinationFieldName)),r.a.createElement("td",null,r.a.createElement(he,{value:t.sourceValueSimplified})),r.a.createElement("td",null,r.a.createElement(he,{value:t.destinationValueSimplified})))},ye=function(e){var t=e.list;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Mapping"),r.a.createElement("th",null,"Source"),r.a.createElement("th",null,"Destination"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(Ee,{key:"".concat(e.sourceFieldName,"-").concat(e.destinationFieldName),row:e})}))))},Oe=ye;he.propTypes={value:s.a.oneOfType([s.a.array,s.a.string])},he.defaultProps={value:""},Ee.propTypes={row:s.a.shape({sourceFieldName:s.a.string,sourceValue:s.a.any,sourceValueSimplified:s.a.any,destinationFieldName:s.a.string,destinationValue:s.a.any,destinationValueSimplified:s.a.any}).isRequired},ye.propTypes={list:s.a.arrayOf(s.a.shape({sourceFieldName:s.a.string,sourceValue:s.a.any,sourceValueSimplified:s.a.any,destinationFieldName:s.a.string,destinationValue:s.a.any,destinationValueSimplified:s.a.any}))},ye.defaultProps={list:[]};var we=function(e){var t=e.html;return r.a.createElement("div",{className:"migration_preview__live"},r.a.createElement("iframe",{srcDoc:t,title:"Content preview"}))},je=we;we.propTypes={html:s.a.string.isRequired};var ke=a(27),Re=a(15),_e=a(44),qe=function(e){var t=e.id,a=e.href,n=e.title,i=e.setHref,o=e.setEvent;return r.a.createElement("a",{className:"".concat(t," button button--small"),role:"button",href:"#",onClick:function(e){e.preventDefault(),i(a),o({type:"User previewed row",migrationPreviewQuery:Object(Re.b)(a)})}},n)},Ne=function(e){var t=e.link,a=e.setHref,i=e.setEvent,o=e.offsetLinks,l=Object(n.useState)(""),c=E()(l,2),s=c[0],u=c[1],m=t["uri-template:suggestions"][0],d=m.label,p=m.variable;return r.a.createElement("form",{className:"exposed-form exposed-form--labeled",onSubmit:function(e){e.preventDefault(),i({type:"User previewed by search",migrationPreviewSearchTerm:s}),a(Object(Re.a)(f()({},p,s),t["uri-template:href"]))}},r.a.createElement(_e.a,{name:"preview_search",label:d,size:"40",type:"search",value:s,validation:{pattern:"(https?://|^/)(.*)"},onChange:function(e){u(e.target.value)}},"Source site URL should be either ",r.a.createElement("em",null,"relative")," (begin with"," ",r.a.createElement("code",null,"/"),")",r.a.createElement("br",null),"or ",r.a.createElement("em",null,"absolute")," (begin with ",r.a.createElement("code",null,"http://"),")"),r.a.createElement("div",{className:"form-actions form-item exposed-form__item--actions"},r.a.createElement("input",{type:"submit",className:"button form-submit",value:"Go"})),r.a.createElement("div",{className:"form-item exposed-form__item--divider"},r.a.createElement("strong",null,"or")),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{className:"form-item__label"},"Browse available rows"),r.a.createElement("div",{className:"migration__preview__links",role:"group","aria-label":"Offset rows"},o.map((function(e){var t=e.id,n=e.href,o=e.title;return r.a.createElement(qe,{key:"offset-".concat(t),id:t,href:n,title:o,setHref:a,setEvent:i})})))))},Pe=Ne;function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}qe.propTypes={id:s.a.string.isRequired,href:s.a.string.isRequired,title:s.a.oneOfType([s.a.string,s.a.node]).isRequired,setHref:s.a.func.isRequired,setEvent:s.a.func},qe.defaultProps={setEvent:function(){}},Ne.propTypes={link:s.a.shape({rel:s.a.string,href:s.a.string,title:s.a.string,"uri-template:href":s.a.string,"uri-template:suggestions":s.a.arrayOf(s.a.object)}).isRequired,offsetLinks:s.a.arrayOf(s.a.object),setHref:s.a.func.isRequired,setEvent:s.a.func},Ne.defaultProps={offsetLinks:[],setEvent:function(){}};var Se=function(e,t){var a=t.href;return Object(L.q)({href:a})},xe=function(e){var t=e.links,a=e.track,i=Ce(Ce({},t["preview-by-offset"]),{},{id:"next"}),o=t["preview-by-url"],l=Object(n.useState)([i]),c=E()(l,2),s=c[0],u=c[1],m=Object(n.useState)({raw:[],html:""}),d=E()(m,2),p=d[0],f=d[1],g=Object(n.useState)(i.href),b=E()(g,2),v=b[0],h=b[1],y=Object(n.useState)({type:"User previewed row",migrationPreviewQuery:Object(Re.b)(i.href)}),O=E()(y,2),w=O[0],k=O[1],R=Object(j.a)({deferFn:Se,href:v}),_=R.data,q=R.run;if(Object(n.useEffect)((function(){v&&q()}),[v]),Object(n.useEffect)((function(){if(_){var e="";if(_ instanceof Error)e=_.message,console.error(_),v!==i.href&&h(i.href);else{e="OK";var t=_.data,n=t.attributes,r=t.links;u(r?Object.entries(r).map((function(e){var t=E()(e,2),a=t[0];return Ce(Ce({},t[1]),{},{id:a})})):[i]),f(n)}!function(e){if(w){var t=w.type,n=ve()(w,["type"]);a(t,Ce(Ce({},n),{},{migrationPreviewResponse:e})),k(null)}}(e)}}),[_]),p){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Preview source site content in Drupal 9 by searching for a URL or by viewing the next available row."),r.a.createElement(Pe,{link:o,setHref:h,setEvent:k,offsetLinks:s}),r.a.createElement(me,{one:r.a.createElement(pe,{padding:!1},r.a.createElement(Oe,{list:p.raw})),two:r.a.createElement(pe,{header:"Content Preview",padding:!1},r.a.createElement(je,{html:p.html}))}))}},De=function(e){var t=e.preview;return r.a.createElement("div",{className:"migration__preview--no-preview"},Object.entries(t).map((function(e){var t=E()(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:a,className:"messages messages--warning"},r.a.createElement("p",null,n.title))})))},Le=function(e){var t=e.preview,a=e.track;return r.a.createElement("div",{className:"migration__preview"},Object.values(t.links).length>0?r.a.createElement(xe,{links:t.links,track:a}):r.a.createElement(De,{preview:t.unmet}))},Ie=Le;xe.propTypes={links:s.a.shape({"preview-by-offset":s.a.object,"preview-by-url":s.a.object}).isRequired,track:s.a.func},De.propTypes={preview:s.a.objectOf(s.a.object).isRequired},Le.propTypes={preview:s.a.shape({links:s.a.object,unmet:s.a.object}).isRequired,track:s.a.func},xe.defaultProps={track:function(){}},Le.defaultProps={track:function(){}};var Me=a(78),Ae=a.n(Me),Qe=function(e){var t=e.button,a=e.className,n=e.action,i=t.title,o=t.rel;return r.a.createElement("a",{title:i,rel:o,className:a,role:"button",onClick:function(e){e.preventDefault(),n()}},i)},Fe=Qe;function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}Qe.propTypes={button:s.a.shape({title:s.a.string.isRequired,rel:s.a.string.isRequired}).isRequired,className:s.a.string,action:s.a.func},Qe.defaultProps={className:"",action:function(){}};var ze=function(){return r.a.createElement("td",null,"— —")},He=function(e){var t=e.mapping,a=t.sourceFieldName,n=t.destinationFieldName,i=t.destinationFieldType,o=t.destinationFieldLabel,l=t.destinationFieldIsRequired,c=t.migrationProcessPlugins_THIS_WILL_CHANGE,s=t.overrides,u=a?r.a.createElement("td",null,r.a.createElement("code",null,a)):r.a.createElement(ze,null),m=n?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"migration__mapping_destination_fields"},r.a.createElement("code",null,n),r.a.createElement("p",null,o,l?r.a.createElement("abbr",{title:"Required Field"},"*"):"")),r.a.createElement("td",null,r.a.createElement("em",null,i))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,null),r.a.createElement(ze,null)),d=c?r.a.createElement("td",null,r.a.createElement("code",null,Object(L.G)(c))):r.a.createElement(ze,null),p=s.length?r.a.createElement("td",null,s.map((function(e){return r.a.createElement(Fe,{key:"$override-{override.label}",button:{title:e.title,rel:e.rel},className:"button",action:e.action})}))):null;return r.a.createElement("tr",null,u,m,d,p)},Ve=function(e){var t=e.links,a=e.unmet,n=e.update;return r.a.createElement("div",{className:"mapping__updates"},r.a.createElement("ul",{className:"menu"},t.map((function(e){return r.a.createElement("li",{key:e.title},r.a.createElement(Fe,{button:{title:e.title,rel:e.rel},className:"button",action:function(){return n(e)}}))}))),a.map((function(e){return r.a.createElement("div",{key:e.href,className:"messages messages--warning"},r.a.createElement("p",null,e.title))})))},Ye=function(e){var t=e.mapping,a=e.track,i=Object(n.useContext)(oe).updateMigration;Object(n.useEffect)((function(){a("User viewed mapping")}),[]);var o=Object(j.a)({promiseFn:L.q,href:t.href}),l=o.data,c=o.isPending,s=o.reload,u=function(e,t){var n={"Skip source field":{type:"User skipped field",value:"migrationDestinationFieldName"}};n[e]&&a(n[e].type,f()({},n[e].value,t))};if(!t.href)return r.a.createElement("div",{className:"migration__mapping migration__mapping--no-mapping"},r.a.createElement("div",{className:"messages messages--warning"},"No Mapping information available."));if(c)return r.a.createElement(ke.a,{message:"Loading…"});if(l instanceof Error)return r.a.createElement("div",{className:"migration__mapping migration__mapping--has-error"},r.a.createElement("div",{className:"messages messages--error"},r.a.createElement("p",null,"Error: ",l.message),r.a.createElement("p",null,t.href)));var m=function(e){i({link:e,callback:s})},d=l.data,p=d.attributes,g=d.links,b=Object(L.u)(g),v=Object(L.t)(g),h=Object(L.l)(g),y=Object.entries(p).filter((function(e){var t=E()(e,2)[1];return"object"===Ae()(t)})).reduce((function(e,t){var a=E()(t,2),n=a[0],r=a[1],i=Object.entries(r).map((function(e){var t=E()(e,2),a=t[0],r=t[1],i="".concat(n,"-").concat(a);return h?{key:i,value:We(We({},r),{},{overrides:Object(Re.d)(r,h,m,u)})}:{key:i,value:r}}));return[].concat(O()(e),O()(i))}),[]);return r.a.createElement("div",{className:"migration__mapping"},r.a.createElement(Ve,{links:b,unmet:v,update:m}),r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Source Field"),r.a.createElement("th",null,"Destination Field"),r.a.createElement("th",null,"Field Type"),r.a.createElement("th",null,"Process Plugins"),r.a.createElement("th",null,!!h.length&&"Operations"))),r.a.createElement("tbody",null,y.map((function(e){var t=e.key,a=e.value;return r.a.createElement(He,{key:t,mapping:a})}))))))},Ge=Ye;He.propTypes={mapping:s.a.shape({sourceFieldName:s.a.string,destinationFieldName:s.a.string,destinationFieldType:s.a.string,destinationFieldLabel:s.a.string,destinationFieldIsRequired:s.a.bool,migrationProcessPlugins_THIS_WILL_CHANGE:s.a.array,overrides:s.a.array}).isRequired},Ve.propTypes={links:s.a.arrayOf(s.a.object),unmet:s.a.arrayOf(s.a.object),update:s.a.func.isRequired},Ve.defaultProps={links:[],unmet:[]},Ye.propTypes={mapping:s.a.shape({href:s.a.string,rel:s.a.string,title:s.a.string}),track:s.a.func},Ye.defaultProps={mapping:{href:"",rel:"",title:""},track:function(){}};var Be=a(45),Ze=a(46),Xe=a(53),Je=a(28),Ke=a(11),$e=a(70),et=a(50),tt=function(e){var t=e.title,a=e.message,i=e.action,o=e.cancel,l=e.isModal,c=Object(n.useRef)(null),s=Object(k.a)(!1),u=E()(s,2),m=u[0],d=u[1],p=function(e){27===e.keyCode&&o()};return Object(n.useEffect)((function(){return document.addEventListener("keydown",p),function(){document.removeEventListener("keydown",p)}}),[]),Object(n.useEffect)((function(){c.current&&c.current.focus()}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{tabIndex:"-1",role:"dialog",className:"ui-dialog",ref:c},r.a.createElement("div",{className:"ui-dialog-titlebar"},r.a.createElement("span",{className:"ui-dialog-title"},t),r.a.createElement("button",{type:"button",title:"Close",className:"ui-dialog-titlebar-close ui-button-icon-only",onClick:o},r.a.createElement("span",{className:"ui-icon ui-icon-closethick"}),"Close")),r.a.createElement("div",{className:"ui-dialog-content ui-widget-content"},r.a.createElement("p",null,a)),r.a.createElement("div",{className:"ui-dialog-buttonpane ui-widget-content"},r.a.createElement("div",{className:"ui-dialog-buttonset"},r.a.createElement("button",{type:"button",className:"button",disabled:m,onClick:function(){d(),i()}},m?r.a.createElement(ke.a,null):t)))),l?r.a.createElement("div",{className:"ui-widget-overlay",onClick:o}):null)},at=tt;tt.propTypes={title:s.a.string.isRequired,message:s.a.string,action:s.a.func.isRequired,cancel:s.a.func.isRequired,isModal:s.a.bool},tt.defaultProps={message:null,isModal:!0};var nt=a(56),rt=function(e){var t=e.active,a=e.amount,n=t?"swooshy--is-swooshing":"",i=Object(nt.b)({amount:a}),o=parseInt(a,10),l="translateY(-".concat(o<100?o:100,"%)");return r.a.createElement("div",{className:"swooshy ".concat(n)},r.a.createElement("div",{className:"swooshy__inner"},r.a.createElement("div",{className:"swooshy__fill",style:{transform:l}}),r.a.createElement("div",{className:"swooshy__amount"},r.a.createElement(nt.a.span,null,i.amount.interpolate((function(e){return parseFloat(e).toFixed(2)}))),"%")))},it=rt;rt.propTypes={active:s.a.bool,amount:s.a.string},rt.defaultProps={active:!1,amount:"0.00"};var ot=function(){var e=document.getElementsByTagName("body")[0],t=Object(n.useState)(parseInt(e.style.paddingTop,10)),a=E()(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){var t=new MutationObserver((function(){i(parseInt(e.style.paddingTop,10))}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),function(){t.disconnect()}}),[]),r},lt=function(e){var t=e.activeLabel,a=e.activeProgress,n=e.isPending,i=e.isRunning,o=e.isStopped;return r.a.createElement("div",null,i&&!o&&t?r.a.createElement("span",null,"Currently active: ",r.a.createElement("em",null,t)," (",a,")"):null,r.a.createElement("span",null,!i&&(n?"Pausing queue, waiting on response":"Queue paused"),o&&(n?"Stopping queue, waiting on response":"Queue stopped"),window.navigator.onLine?"":" — offline"))},ct=function(){return r.a.createElement("span",null,"No queued migrations")},st=function(){var e=Object(n.useContext)(oe),t=e.active,a=e.queue,i=e.isActivePending,o=e.isQueueRunning,l=e.isQueueStopped,c=e.migrations,s=t.hasOwnProperty("id")?Object(L.i)(t.id,c):{label:null,importedCount:0,totalCount:0},u=s.label,m=s.importedCount,d=s.totalCount,p="".concat(Object(L.K)(Object(L.H)(m,d)),"%");return r.a.createElement("div",{className:"migration_info__queue_status"},a.length?r.a.createElement(lt,{activeLabel:u,activeProgress:p,isPending:i,isRunning:o,isStopped:l}):r.a.createElement(ct,null))};lt.propTypes={activeLabel:s.a.string,activeProgress:s.a.string,isPending:s.a.bool,isRunning:s.a.bool,isStopped:s.a.bool},lt.defaultProps={activeLabel:null,activeProgress:"0%",isPending:!1,isRunning:!1,isStopped:!1};var ut=a(19),mt=function(){var e=Object(n.useContext)(oe),t=e.activeStopLink,a=e.updateMigration,i=e.queue,o=e.isQueueRunning,l=e.setQueueRunning,c=e.setQueueClear,s=e.isQueueStopped,u=!!i.length,m=Object(A.a)(),d=function(){l()};Object(n.useEffect)((function(){u&&(m?d():a({link:t,callback:function(){console.log("Successfully stopped after auto-pausing due to going offline."),d()},onError:function(){console.log("Failed to stop after auto-pausing due to going offline; this most likely means enough time had passed that it had automatically stopped."),d()}}))}),[m]);return r.a.createElement("div",{className:"migration_info__queue_controls"},r.a.createElement("button",{className:"button button--small",title:"Stop and clear the queue",type:"button",onClick:function(){c()},disabled:s||!u||m},r.a.createElement(ut.a,{icon:"square",size:"16"})),r.a.createElement("button",{className:"button button--small",title:o?"Pause queue":"Continue queue",type:"button",disabled:!u||m,onClick:d},r.a.createElement(ut.a,{icon:o?"pause":"play",size:"16"})))};function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ft=function(e,t){return e.reduce((function(e,a){return e+a[t]}),0)},gt=function(e){var t=e.href,a=e.title;return r.a.createElement("a",{href:t,title:a,className:"admin-item__link"},a)},bt=function(e){var t,a=e.migrations,i=Object(n.useContext)(oe),o=i.active,l=i.links,c=Object(n.useState)(!0),s=E()(c,2),u=s[0],m=s[1],d=ot(),p=Object(L.I)(a),f=ft(a,"importedCount"),g=ft(a,"totalCount"),b=1===a.length,v=b?{label:(t=a[0]).label,infoLinks:t.links}:{label:null,infoLinks:l},h=v.label,y=v.infoLinks,O=y?Object.entries(y).filter((function(e){return"text/html"===E()(e,2)[1].type})).map((function(e){var t,a,n=E()(e,2),r=n[0],i=n[1],o=((a={"https://github.com/acquia/acquia_migrate#link-rel-migration-messages":{title:"Total errors: ".concat((t=i).title)}}).hasOwnProperty(t.rel)?a[t.rel]:{title:t.title}).title;return pt(pt({id:r},i),{},{title:b?o:i.title})})):[],w=o.hasOwnProperty("id"),j="Data ".concat(w?"importing":"imported");return Object(n.useEffect)((function(){document.documentElement.style.setProperty("--offset-top","".concat(d,"px"))}),[d]),r.a.createElement("div",{className:"migration_info ".concat(u?"is-expanded":"is-collapsed")},r.a.createElement("button",{className:"migration_info__toggle",onClick:function(){m(!u)}},r.a.createElement(ut.a,{icon:"expander",fill:"none",stroke:"none"})),r.a.createElement(it,{active:w,amount:Object(L.K)(p)}),r.a.createElement("div",{className:"migration_info__data"},r.a.createElement("h5",{className:"migration_info__title"},j,h?" (".concat(h,")"):"",r.a.createElement("span",null,":"," ",r.a.createElement("span",{className:"tabular"},f,"/",g))),r.a.createElement("ul",{className:"migration_info__list"},O.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(gt,{title:e.title,href:e.href}))}))),!b&&r.a.createElement("div",{className:"migration_info__queue"},r.a.createElement(st,null),r.a.createElement(mt,null))))},vt=bt;gt.propTypes={title:s.a.string.isRequired,href:s.a.string.isRequired},bt.propTypes={migrations:s.a.arrayOf(s.a.shape({id:s.a.string,index:s.a.number,label:s.a.string,consistsOf:s.a.arrayOf(s.a.object),dependencies:s.a.arrayOf(s.a.object),lastImported:s.a.object,links:s.a.object,importedCount:s.a.number,processedCount:s.a.number,totalCount:s.a.number,skipped:s.a.bool,completed:s.a.bool,status:s.a.object}))},bt.defaultProps={migrations:[]};var ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};Object(n.useEffect)((function(){var a=function(a){if(!e)return a.preventDefault(),t(),a.returnValue="https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event#browser_compatibility","https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event#browser_compatibility"};return window.addEventListener("beforeunload",a),function(){window.removeEventListener("beforeunload",a)}}),[e])};function Et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ot=function(e){var t=e.id,a=Object(u.useTracking)(),i=Object(l.d)(),o=Object(n.useContext)(oe),c=o.migrations,s=o.isLoading,m=o.modal,d=o.safeToCloseApp,p=o.basepath,f=(ht(d,(function(){i(p)})),c.find((function(e){return e.id===decodeURIComponent(t)})));if(!!!f)return r.a.createElement(Be.a,{pending:s,empty:"No migration found."});var b=f.label,h=f.processedCount,E=f.totalCount,y=f.dependencies,O=f.consistsOf,w=f.links,j=Object.values(w).find((function(e){return"https://github.com/acquia/acquia_migrate#link-rel-migration-mapping"===e.rel})),k=Object(L.n)(w),R=k.preview,_=k.previewable,q=y.map((function(e){return yt(yt({},e),{},{label:c.find((function(t){return t.id===e.id})).label})})),N=function(e,n){a.trackEvent(yt(yt({type:e},n),{migrationID:t,migrationUnderlyingList:O.map((function(e){return e.id}))}))};return r.a.createElement("div",{className:"migrate-ui__migration_detail region-content"},r.a.createElement(g.a,null,r.a.createElement(Xe.a,null,r.a.createElement(Je.a,null,r.a.createElement(Ke.a,{href:"../../../../",title:"Home"},"Home")),r.a.createElement(Je.a,null,r.a.createElement(l.a,{to:"../../"},"Migrations")),r.a.createElement(Je.a,null,r.a.createElement("span",null,b))),r.a.createElement(Ze.a,{title:"Migration: ".concat(b)}),r.a.createElement(vt,{migrations:[f]}),r.a.createElement($e.a,null,_?r.a.createElement(et.a,{to:"preview"},"Preview"):null,r.a.createElement(et.a,{to:"./"},"Mapping"),r.a.createElement(et.a,{to:"details"},"Details"))),r.a.createElement(l.c,{primary:!1},_&&r.a.createElement(Ie,{path:"preview",preview:R,completed:h===E,track:N}),r.a.createElement(Ge,{path:"/",mapping:j,track:N}),r.a.createElement(ge,{path:"details",dependencies:q,consistsOf:O,track:N})),r.a.createElement(v,null,m?r.a.createElement(at,{title:m.title,message:m.message,action:m.action,cancel:m.cancel}):null))},wt=Ot;Ot.propTypes={id:s.a.string},Ot.defaultProps={id:""};var jt=function(e){var t=e.value,a=e.className,n=Object(nt.b)({value:t});return r.a.createElement(nt.a.span,{className:"tabular ".concat(a)},n.value.interpolate(Math.round))},kt=jt;jt.propTypes={value:s.a.oneOfType([s.a.number,s.a.string]).isRequired,className:s.a.string},jt.defaultProps={className:""};var Rt=function(e){var t=e.label,a=e.value,n=e.children,i=e.type,o=e.modifier;return r.a.createElement("div",{className:"".concat("inline"===i?"ajax-progress ajax-progress-bar":""," ").concat("small"===o?"progress--small":"")},r.a.createElement("div",{className:"progress","aria-live":"polite"},r.a.createElement("div",{className:"progress__label",title:t},t),r.a.createElement("div",{className:"progress__track"},r.a.createElement("div",{className:"progress__bar",style:{width:"".concat(a,"%")}})),r.a.createElement("div",{className:"progress__percentage"},r.a.createElement(kt,{value:a}),"%"),r.a.createElement("div",{className:"progress__description"},n)))},_t=Rt;Rt.propTypes={label:s.a.string.isRequired,value:s.a.number.isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired,type:s.a.string,modifier:s.a.string},Rt.defaultProps={type:"inline",modifier:"small"};var qt=function(e){var t=e.item,a=t.title,n=100*t.progressRatio;return r.a.createElement(_t,{label:a,value:n,type:"full",modifier:"large"},r.a.createElement("span",null,"Please wait for this import to finish before leaving this window."))},Nt=function(){var e=x(),t=e.active,a=e.queue,i=e.addToQueue,o=e.isQueueCompleted,l=e.cleanupQueue,c=t.qid||"",s=Object(n.useContext)(oe),u=s.initialImportLink,m=s.setInitialImporting;return Object(n.useEffect)((function(){if(u){var e=u.title,t=u.href;m(!0),i({id:"initialImport",title:e,start:{href:t},operation:"import"})}}),[u]),Object(n.useEffect)((function(){a.length&&o&&setTimeout((function(){l(),m(!1)}),1e3)}),[c]),Object(n.useEffect)((function(){return function(){m(!1)}}),[]),r.a.createElement("div",{className:"initial_import"},a.map((function(e){return r.a.createElement(qt,{key:e.qid,item:e})})))};qt.propTypes={item:s.a.shape({title:s.a.string,progressRatio:s.a.number}).isRequired};var Pt=a(65),Tt=a(71),Ct=a(59),St=Object(Tt.a)(Ct.a),xt=function(){return r.a.createElement(q.b,null,r.a.createElement(q.d,null,r.a.createElement(Nt,null)),r.a.createElement(q.a,{prototype:Pt.a},r.a.createElement(St,null)))},Dt=function(){var e=Object(n.useContext)(oe).isRefreshing;return r.a.createElement("div",{id:"stale-data"},e?r.a.createElement(ke.a,{message:"Checking for updates…"}):null)},Lt=function(){var e=Object(n.useContext)(oe).basepathPreselect;return r.a.createElement("div",null,r.a.createElement("h2",null,"Migration data not yet chosen."),r.a.createElement("p",null,r.a.createElement(Ke.a,{href:e,title:"Select data to migrate"},r.a.createElement("span",null,"Choose which data to import from your source site")),r.a.createElement("span",null,", then you will be guided back to this dashboard to start migrations!")))},It=function(e){var t=e.buttons,a=e.pending,n=e.isOpen,i=e.toggleOpen;return r.a.createElement("div",{className:"dropdown dropleft"},a?r.a.createElement(ke.a,null):r.a.createElement("a",{role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":n,onClick:i},r.a.createElement(ut.a,{icon:"more-vertical"})),r.a.createElement("div",{className:"dropdown-menu ".concat(n?"show":"")},t.map((function(e){return r.a.createElement(Fe,{key:e.key,button:e,className:"dropdown-item",action:function(){i(),e.action()}})}))))},Mt=It;It.propTypes={buttons:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,rel:s.a.string.isRequired,title:s.a.string.isRequired,action:s.a.func.isRequired})),pending:s.a.bool,isOpen:s.a.bool.isRequired,toggleOpen:s.a.func.isRequired},It.defaultProps={buttons:[],pending:!1};var At=r.a.createContext(),Qt=function(e){var t=e.parentRef,a=e.children,i=t.current?t.current.scrollTop:0,o=Object(n.useState)(""),l=E()(o,2),c=l[0],s=l[1],u=Object(nt.b)((function(){return{offset:0,from:{offset:0},reset:!0,onFrame:function(e){var a=e.offset;t.current&&t.current.scrollTo(0,a)}}})),m=E()(u,2)[1];return r.a.createElement(At.Provider,{value:{scrollParent:function(e){m({from:{offset:i},offset:e})},isChildFocused:function(e){return c===e},focusChild:function(e){s(e),setTimeout((function(){s("")}),1e3)}}},a)};Qt.propTypes={parentRef:s.a.shape({current:s.a.instanceOf(Element)}).isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var Ft=function(){var e=Object(n.useState)(null),t=E()(e,2),a=t[0],r=t[1],i=function(e){return e===a};return[i,function(e){i(e)?r(null):r(e)}]},Ut=r.a.createContext(),Wt=function(e){var t=e.children,a=Ft(),n=E()(a,2),i=n[0],o=n[1],l=Ft(),c=E()(l,2),s=c[0],u=c[1];return r.a.createElement(Ut.Provider,{value:{checkDependencyToggle:i,toggleDependency:o,checkOperationsToggle:s,toggleOperations:u}},t)};Wt.propTypes={children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var zt=function(e){var t=e.id,a=e.dependencies,i=Object(n.useContext)(Ut),o=i.checkDependencyToggle,l=i.toggleDependency,c=Object(n.useContext)(At).focusChild,s=o(t),u=function(){l(t)};return r.a.createElement("div",{className:"dropdown dropleft"},r.a.createElement("a",{className:"dropdown-toggle",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":s,onClick:u},r.a.createElement(ut.a,{icon:"chevron-down"})),r.a.createElement("div",{className:"dropdown-menu ".concat(s?"show":"")},a.map((function(e){return r.a.createElement("div",{key:e.id,className:"dropdown-item"},e.incomplete?r.a.createElement("a",{title:"jump to ".concat(e.label," migration"),className:"migration__".concat(e.incomplete?"danger":"success"," migration__import-status"),onClick:function(){return t=e.id,u(),void c(t);var t}},e.label):e.label)}))))},Ht=function(e){var t=e.id,a=e.dependencies,n=e.activity,i=e.hasImported,o=e.showDependencies,l=e.link,c="Not available",s="muted";if("idle"!==n&&(s="working",c="importing"===n?"Importing …":"rollingBack"===n?"Rolling back …":"refreshing"===n?"Refreshing …":"stuck"===n?"Migration is frozen":"Unknown activity …"),!l&&!o)return r.a.createElement("span",{className:"migration__".concat(s," migration__import-status")},c);var u=a.length>0;if("stuck"===n)s="warning";else if("idle"!==n);else if(o&&u){var m=u&&a.some((function(e){return e.incomplete}));c=m?"Unmet dependencies":"No unmet dependencies",s=m?"danger":"success",i||m||null!==l||(c="Dependencies need review",s="warning")}else l?(c="Ready for ".concat(l.title),s="success"):c=i?"Already imported":"Not ready";return r.a.createElement("div",{className:"migration__status"},r.a.createElement("span",{className:"migration__".concat(s," migration__import-status")},c),o&&u&&r.a.createElement(zt,{id:t,dependencies:a}))},Vt=Ht;zt.propTypes={id:s.a.string.isRequired,dependencies:s.a.arrayOf(s.a.object)},zt.defaultProps={dependencies:[]},Ht.propTypes={id:s.a.string.isRequired,activity:s.a.string.isRequired,dependencies:s.a.arrayOf(s.a.object),hasImported:s.a.bool.isRequired,showDependencies:s.a.bool.isRequired,link:s.a.shape({rel:s.a.string,title:s.a.string,href:s.a.string})},Ht.defaultProps={dependencies:[],link:null};var Yt=a(253),Gt=a(252),Bt=a(154),Zt=a(155),Xt=a(251),Jt=a(36),Kt=function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])},$t=function(e){var t=e.start;return r.a.createElement("span",null,"started ",Object(Yt.a)(t,Date.now()),r.a.createElement("br",null),"still in progress")},ea=function(e){var t=e.startTime,a=e.endTime,i=e.start,o=e.end,l=e.duration,c=Object(n.useState)(!1),s=E()(c,2),u=s[0],m=s[1],d=Object(n.useState)(Date.now()),p=E()(d,2),f=p[0],g=p[1],b=Object(Gt.a)(i,{addSuffix:!0,includeSeconds:!0}),v=Object(Bt.a)(i,Jt.a),h=Object(Bt.a)(o,Jt.a),y=Object(Yt.a)(i,f),O=Object(Zt.a)(f,i)>60?3e4:2e3,w=Object(Xt.a)(Object(Jt.c)(l));return Kt((function(){return g(Date.now())}),O),r.a.createElement("div",{className:"migration__last_imported"},r.a.createElement("a",{onClick:function(){return m(!u)},title:y},b,r.a.createElement("br",null),"took ",w||"less than a second"),r.a.createElement("div",{className:"migration__last_imported_details ".concat(u?"migration__last_imported_details--is-visible":"")},"Started: ",r.a.createElement("span",{title:t},v),r.a.createElement("br",null),"Finished: ",r.a.createElement("span",{title:a},h)))},ta=function(e){var t=e.imported;if(!t)return r.a.createElement("span",null,"Not imported");var a=t.startTime,n=t.endTime,i=t.duration,o=Object(Jt.b)(a);if(!n)return r.a.createElement($t,{start:o});var l=Object(Jt.b)(n);return r.a.createElement(ea,{startTime:a,endTime:n,start:o,end:l,duration:i})},aa=ta;$t.propTypes={start:s.a.instanceOf(Date).isRequired},ea.propTypes={startTime:s.a.string.isRequired,endTime:s.a.string.isRequired,start:s.a.instanceOf(Date).isRequired,end:s.a.instanceOf(Date).isRequired,duration:s.a.number.isRequired},ta.propTypes={imported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number})},ta.defaultProps={imported:null};var na=function(e){var t=e.status,a=e.importedCount,n=e.totalCount,i=t.code,o=t.message,l=["IMPORTED_WARN","IMPORTING_ERR","IMPORTED_ERR"].includes(i)?"".concat("migration__import-status migration","__warning"):"";return r.a.createElement("span",{title:o,className:l},r.a.createElement(kt,{value:a}),"/",r.a.createElement("span",{className:"tabular"},n))},ra=na;na.propTypes={status:s.a.shape({code:s.a.string,message:s.a.string}).isRequired,importedCount:s.a.number.isRequired,totalCount:s.a.number.isRequired};var ia=function(e){var t={import:"Importing",rollback:"Rolling back","rollback-and-import":"Rolling back and importing",refresh:"Refreshing"};return t.hasOwnProperty(e)?t[e]:""},oa=function(e){var t=e.imported,a=e.label;if(!e.showLastImported)return r.a.createElement("span",null,a);if(!t)return r.a.createElement("span",null,a);var n=t.startTime,i=t.endTime,o=t.duration;if(i||o)return null;var l=Object(Jt.b)(n);return r.a.createElement("span",null,a?"".concat(a,", "):"","started ",Object(Yt.a)(l,Date.now()))},la=function(e){var t=e.label,a=e.item,i=e.imported,o=a.id,l=a.qid,c=a.operation,s=a.pending,u=a.status,m=Object(n.useContext)(oe),d=m.migrations,p=m.removeFromQueue,f=Object(L.J)(Object(L.i)(o,d),c),g="rollback"!==c,b="running"===u||"paused"===u||"completed"===u||"started"===u&&f>0,v=function(e,t){switch(e){case"queued":return"Queued";case"started":return"refresh"===t?ia(t):"Starting";case"running":return ia(t);case"paused":return window.navigator.onLine?"Paused":"Paused (offline)";case"completed":return"Completed";default:return""}}(u,c),h="completed"===u?100:100*f;return r.a.createElement("div",{className:"migration_progress"},b?r.a.createElement(_t,{label:t,value:h},r.a.createElement(oa,{imported:i,label:v,showLastImported:g})):r.a.createElement("div",{className:"ajax-progress ajax-progress-bar progress--small"},r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress__label",title:t},t),r.a.createElement("div",{className:"progress__track"}),r.a.createElement("div",{className:"progress__percentage"},"0%"),r.a.createElement("div",{className:"progress__description"},r.a.createElement("span",null,v)))),r.a.createElement("div",{className:"migration_progress__cancel"},s?r.a.createElement("span",{title:"Pending response"},r.a.createElement(ut.a,{icon:"circle"})):r.a.createElement("a",{rel:"https://github.com/acquia/acquia_migrate#link-rel-dequeue-item",onClick:function(){p(l)},title:"Cancel",role:"button","aria-label":"Cancel"},r.a.createElement(ut.a,{icon:"cancel"}),r.a.createElement("span",{className:"visually-hidden"},"Cancel"))))},ca=la;oa.propTypes={imported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number}),label:s.a.string.isRequired,showLastImported:s.a.bool.isRequired},oa.defaultProps={imported:null},la.propTypes={label:s.a.string,item:s.a.shape({id:s.a.string,qid:s.a.string,operation:s.a.string,pending:s.a.bool,status:s.a.string}).isRequired,imported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number})},la.defaultProps={label:"",imported:null};var sa=a(58),ua=function(e){var t=e.className,a=e.children;return r.a.createElement("td",{className:t},r.a.createElement("div",null,a))},ma=function(e){var t=e.data,a=e.columns,i=e.operation,o=e.selections,l=e.selectSingle,c=t.id,s=t.page,u=t.status,m=Object(n.useContext)(oe),d=m.migrations,p=m.addToQueue,g=m.updateMigration,b=m.removeFromList,v=m.isInitialImporting,h=m.active,y=m.queue,O=Object(n.useContext)(At),w=O.scrollParent,j=O.isChildFocused,R=Object(n.useContext)(Ut),_=R.checkOperationsToggle,q=R.toggleOperations,N=Object(k.a)(!1),P=E()(N,2),T=P[0],C=P[1],S=Object(n.useRef)(null),x=Object(A.a)(),D=Object(L.i)(c,d),I=Object(L.p)(c,y),M=D.label,Q=D.status,F=D.activity,U=D.importedCount,W=D.totalCount,z=D.lastImported,H=D.links,V=Object(L.n)(H).previewable,Y=Object(L.b)(D,d,"import"),G=H.hasOwnProperty("rollback"),B=_(c),Z=h&&h.id===c,X=!!I,J="new"===u,K="removed"===u,$=j(c),ee=H.hasOwnProperty(i),te=v||x,ae={checked:!!ee&&o.includes(c),disabled:te||!ee||K};Object(n.useEffect)((function(){K&&setTimeout((function(){b(c,s,I)}),1500)}),[K]),Object(n.useEffect)((function(){return $&&S.current&&w(S.current.offsetTop-S.current.offsetHeight),function(){l(f()({},c,!1))}}),[$]);H.stop;var ne=ve()(H,["stop"]),re=Object(L.u)(ne).map((function(e){var t=e.title,a=e.rel;return{key:"".concat(c,"-").concat(t),title:t,rel:a,action:function(){g({link:e,toggle:C,callback:function(){"Reset migration"===t&&location.reload()}})}}}));if(Object(L.v)(ne,"rollback-and-import")&&!y.length){var ie=ne["rollback-and-import"];re.push({key:"".concat(c,"-").concat(ie.title),title:ie.title,rel:ie.rel,action:function(){p({id:c,title:M,start:{href:ie.href},operation:"rollback-and-import"})}})}B&&!re.length&&q(c);var le=H["migration-messages"];return r.a.createElement("tr",{id:c,ref:S,className:"migration table_row ".concat(K?"migration__removed migration__removed--".concat(Object(L.j)(D)):"","\n      ").concat(J?"migration__new":"","\n      ").concat($?"migration__focused":"")},a.includes("actions")&&r.a.createElement(ua,{className:"migration__actions"},X?r.a.createElement(ut.a,{size:"16",icon:Z?"zap":"clock"}):r.a.createElement(sa.a,{id:c,options:ae,toggle:function(){l(f()({},c,!ae.checked))}})),a.includes("name")&&r.a.createElement(ua,null,I?r.a.createElement(ca,{item:I,label:M,imported:z}):r.a.createElement(se,{id:c,previewable:V},M)),a.includes("status")&&r.a.createElement(ua,{className:"migration_row__status"},r.a.createElement(Vt,{id:c,activity:F,dependencies:Y,hasImported:G,showDependencies:0===U&&!ee||"import"===i||"refresh"===i,link:ee?H[i]:null})),a.includes("imported")&&r.a.createElement(ua,{className:"migration_row__imported_count col--align"},r.a.createElement(ra,{status:Q,importedCount:U,totalCount:W})),a.includes("messages")&&r.a.createElement(ua,{className:"migration_row__message_count col--align"},le?r.a.createElement(Ke.a,{href:le.href,title:"View ".concat(M," messages")},r.a.createElement(kt,{value:le.title})):r.a.createElement("span",{className:"tabular"},"0")),a.includes("lastImported")&&r.a.createElement(ua,{className:"migration_row__last_imported"},r.a.createElement(aa,{imported:z})),a.includes("ops")&&r.a.createElement(ua,{className:"migration_row__operations col--align"},r.a.createElement(Mt,{buttons:re,pending:T,isOpen:B,toggleOpen:function(){return q(c)}})))},da=ma;function pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}ua.propTypes={className:s.a.string,children:s.a.oneOfType([s.a.arrayOf(s.a.element),s.a.element]).isRequired},ua.defaultProps={className:""},ma.propTypes={data:s.a.shape({id:s.a.string,index:s.a.number,lastImported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number}),page:s.a.string,status:s.a.string}).isRequired,columns:s.a.arrayOf(s.a.string).isRequired,operation:s.a.string.isRequired,selections:s.a.arrayOf(s.a.string),selectSingle:s.a.func.isRequired},ma.defaultProps={selections:[]};var fa=function(e){var t=e.migrations,a=e.options,i=e.operation,o=e.setOperation,l=e.selections,c=e.selectAll,s=Object(A.a)(),m=Object(u.useTracking)(),d=Object(n.useContext)(oe),p=d.addToQueue,g=d.limiters.searchTitle,b=d.updateLimiter,v=l.filter((function(e){return e}));return r.a.createElement("div",{className:"migration__operations"},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),"import"===i){var a=v.reduce((function(e,a){var n=Object(L.i)(a,t),r=n.processedCount,i=n.totalCount,o=n.consistsOf;return e.migrationInitiatedQuantity+=1,e.migrationInitiatedRows+=i-r,e.migrationInitiatedList.push(a),e.migrationInitiatedUnderlyingList=[].concat(O()(e.migrationInitiatedUnderlyingList),O()(o.map((function(e){return e.id})))),e}),{migrationInitiatedQuantity:0,migrationInitiatedRows:0,migrationInitiatedList:[],migrationInitiatedUnderlyingList:[]});m.trackEvent(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({type:"User initiated migration"},a))}v.forEach((function(e){var a=Object(L.i)(e,t),n=a.label,r=a.links[i].href;p({id:e,title:n,start:{href:r},operation:i})})),c(!1)},className:"migrate__exposed-form"},r.a.createElement("div",{className:"migrate__exposed-form__item"},r.a.createElement("select",{name:"migration__operations_selector",id:"migration__operations_selector",className:"form-element form-element--type-select",onChange:function(e){o(e.target.value)},value:i,disabled:s},a.map((function(e){var t=E()(e,2),a=t[0],n=t[1];return r.a.createElement("option",{key:a,value:a},n)})))),r.a.createElement("div",{className:"migrate__exposed-form__item migrate__exposed-form__item--actions"},r.a.createElement("button",{type:"submit",disabled:""===i||!v.length,className:"button button--primary form-submit"},v.length?"Apply to (".concat(v.length,") selected"):"No migrations selected")),r.a.createElement(_e.a,{name:g.name,type:"search",value:g.value,size:"30",placeholder:"Filter by migration name",onChange:function(e){b(g.name,e.target.value)}})))},ga=fa;fa.propTypes={migrations:s.a.arrayOf(s.a.shape({id:s.a.string,index:s.a.number,label:s.a.string,consistsOf:s.a.arrayOf(s.a.object),dependencies:s.a.arrayOf(s.a.object),lastImported:s.a.object,links:s.a.object,importedCount:s.a.number,processedCount:s.a.number,totalCount:s.a.number,skipped:s.a.bool,completed:s.a.bool,status:s.a.object})),options:s.a.arrayOf(s.a.array),operation:s.a.string,setOperation:s.a.func.isRequired,selections:s.a.arrayOf(s.a.string),selectAll:s.a.func.isRequired},fa.defaultProps={migrations:[],operation:"",options:[],selections:[]};var ba=function(e){var t=e.links;if(!t)return null;var a=["migration-messages","migration-entity-validation-messages"].map((function(e){return t.hasOwnProperty(e)?t[e]:null})),n=E()(a,2),i=n[0],o=n[1];if(!i&&!o)return null;var l=[i,o].map((function(e){return e?e.title.match(/\d+$/):"0"})),c=E()(l,2),s=c[0],u=c[1];return r.a.createElement("li",null,"🐛 Review and debug the ",s," ",r.a.createElement(Ke.a,{href:i.href,title:"Messages"},"messages"),"."," ",o?r.a.createElement("span",null,"Good news, ",u," of those are"," ",r.a.createElement(Ke.a,{href:o.href,title:"Messages in category Entity Validation"},"validation errors"),", which means they can be eliminated by fixing data on your upstream Drupal 7 site!"):null)},va=function(e){var t=e.basepathModule;return r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"Check the Installed Modules and Recommendations"},"🤖")," ","Review and enable modules from the"," ",r.a.createElement(Ke.a,{href:t,title:"Module Auditor"},"module auditor")," ","in order to expose more data/configuration to migrate. There may be modules we do not have a migration path for, or custom code which will need special attention.")},ha=function(){return r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"Time for some elbow grease"},"💪")," ","There are some"," ",r.a.createElement(Ke.a,{href:"https://www.drupal.org/docs/upgrading-drupal/known-issues-when-upgrading-from-drupal-6-or-7-to-drupal-8",title:"Known issues when upgrading from drupal 6 or 7 to Drupal 8"},"important features that do not yet have a migration path")," ","(e.g. Views). Those need to be reconfigured by hand.")},Ea=function(){return r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"Work on your site theme"},"🙈")," ","You might notice your site looks a little generic."," ",r.a.createElement(Ke.a,{href:"https://www.drupal.org/docs/theming-drupal/upgrading-classes-on-7x-themes-to-8x",title:"Upgrading 7.x themes to 8.x"},"Drupal 7 themes must be rebuilt for 9"),", learn more about"," ",r.a.createElement(Ke.a,{href:"https://www.drupal.org/docs/theming-drupal",title:"Theming Drupal"},"theming Drupal"),r.a.createElement("br",null),"or check out"," ",r.a.createElement(Ke.a,{href:"https://www.acquia.com/products/drupal-cloud/site-studio",title:"Acquia Site Studio"},"Acquia Site Studio"),".")},ya=function(e){var t=e.cloudURL,a=e.cloudTitle;return r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"Launching your Drupal 9 site."},"🚀")," ","Once satisfied with the state of this Drupal 9 site, go to"," ",t?r.a.createElement(Ke.a,{href:t,title:"Acquia Cloud"},a):a," ",'and click the "Promote" button, to promote this site from the "Migrate" environment to your "Stage" or "Dev" environment.')},Oa=function(){return r.a.createElement("div",{className:"migration_overview"},r.a.createElement("h2",null,"🎉🎉 Congrats on having nearly all of your data migrated into Drupal 9!"),r.a.createElement("p",null,"To help get the remaining work finished, reach out to your Acquia Account Manager. We are happy to provide more in-depth technical assistance, or guide you to engage"," ",r.a.createElement(Ke.a,{href:"https://www.acquia.com/resources/datasheets/acquia-professional-services",title:"Acquia Professional Services"},"Professional Services"),"."))},wa=function(){return r.a.createElement("p",{className:"inline-icon"},r.a.createElement(ut.a,{icon:"vetted",stroke:"none"})," If you need assistance with any of these items, reach out to your Acquia Account Manager. We are happy to provide more in-depth technical assistance, or guide you to engage"," ",r.a.createElement(Ke.a,{href:"https://www.acquia.com/resources/datasheets/acquia-professional-services",title:"Acquia Professional Services"},"Professional Services"),".")},ja=function(){return r.a.createElement("div",{className:"migration_overview"},r.a.createElement("h2",null,r.a.createElement("span",{role:"img","aria-label":"Time to party!"},"🎉🎉")," ","Hooray! All your migrations are completed!"),r.a.createElement("p",null,"Migrating a Drupal site has never been easy, and we hope that using the"," ",r.a.createElement("strong",null,"Acquia Migrate: ",r.a.createElement("em",null,"Accelerate"))," ","has made this process go smoothly and gave you a big head start."),r.a.createElement("p",null,"We know that this is not the end of the work to have your site ready for production, but the fact that you got here is a real achievement!"),r.a.createElement("p",null,"Now that your content is in Drupal 9, for future releases you will only need to update the codebase without any changes to the data models or any of your content."),r.a.createElement("p",null,"To help get the remaining work finished, reach out to your Acquia Account Manager. We are happy to provide more in-depth technical assistance, or guide you to engage"," ",r.a.createElement(Ke.a,{href:"https://www.acquia.com/resources/datasheets/acquia-professional-services",title:"Acquia Professional Services"},"Professional Services"),"."))},ka=function(e){var t=e.active,a=e.needsReview,i=e.completed,o=Object(n.useContext)(oe),c=o.basepathModule,s=o.links,u=o.lists,m=o.cloudURL,d=u.find((function(e){return"needsReview"===e.name})).to;return t?null:!t&&a?r.a.createElement("div",{className:"migration_overview"},r.a.createElement("h2",null,"🎉🎉 Congrats on having nearly all of your data migrated into Drupal 9!"),r.a.createElement("p",null,"Migrating a Drupal site is a lot of work, and we hope that using the"," ",r.a.createElement("strong",null,"Acquia Migrate: ",r.a.createElement("em",null,"Accelerate"))," ","has made this task less daunting."),r.a.createElement("p",null,"You are now well on your way with the move from Drupal 7 to Drupal 9, and remember you will never have to do a big migration like this one again!",r.a.createElement("br",null),"When Drupal 10 releases you will only need to update the codebase without any changes to the data models or any of your content."),r.a.createElement("p",null,r.a.createElement("strong",null,"Next steps:")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"Review any incomplete Migrations"},"🔬")," ","There are ",a," migrations that"," ",r.a.createElement(l.a,{to:d},"Need Review"),". Review those migrations for outstanding things to troubleshoot."),r.a.createElement(ba,{links:s}),r.a.createElement(va,{basepathModule:c}),r.a.createElement(ha,null),r.a.createElement(Ea,null),r.a.createElement(ya,{cloudURL:m})),r.a.createElement(wa,null)):t||a||!i?null:r.a.createElement("div",{className:"migration_overview"},r.a.createElement("h2",null,r.a.createElement("span",{role:"img","aria-label":"Time to party!"},"🎉🎉")," ","Hooray! All your migrations are completed!"),r.a.createElement("p",null,"Migrating a Drupal site has never been easy, and we hope that using the"," ",r.a.createElement("strong",null,"Acquia Migrate: ",r.a.createElement("em",null,"Accelerate"))," ","has made this process go smoothly and gave you a big head start."),r.a.createElement("p",null,"We know that this is not the end of the work to have your site ready for production, but the fact that you got here is a real achievement!"),r.a.createElement("p",null,"Now that your content is in Drupal 9, for future releases you will only need to update the codebase without any changes to the data models or any of your content."),r.a.createElement("p",null,r.a.createElement("strong",null,"Next steps:")),r.a.createElement("ul",null,r.a.createElement(va,null),r.a.createElement(ha,null),r.a.createElement(Ea,null),r.a.createElement(ya,{cloudURL:m})),r.a.createElement(wa,null))},Ra=function(e){var t=e.active,a=e.needsReview,n=e.completed;return!t&&a?r.a.createElement(Oa,null):t||a||!n?t&&!a?r.a.createElement("div",null,r.a.createElement("p",null,"No migrations currently ",r.a.createElement("em",null,"need review"),".")):null:r.a.createElement(ja,null)},_a=function(e){var t=e.active,a=e.needsReview,n=e.completed;return!t&&a?r.a.createElement(Oa,null):t||a||!n?t&&!n?r.a.createElement("div",null,r.a.createElement("p",null,"No migrations currently ",r.a.createElement("em",null,"completed"),".")):null:r.a.createElement(ja,null)},qa=function(e){return e.skipped?null:r.a.createElement("div",null,r.a.createElement("p",null,"No migrations currently ",r.a.createElement("em",null,"skipped"),"."))},Na=function(e){var t=e.refresh,a=e.cloudURL;return!t&&a?r.a.createElement("div",null,r.a.createElement("p",null,"There are currently no migrations to refresh."),r.a.createElement("p",null,"If the Drupal 7 source application has new data, please go to"," ",a?r.a.createElement(Ke.a,{href:a,title:"Acquia Cloud"},"your Acquia Cloud application"):"your Acquia Cloud application"," ",'and click the "Refresh" button.')):t||a?null:r.a.createElement("div",null,r.a.createElement("p",null,"There are currently no migrations to refresh."),r.a.createElement("p",null,"If the Drupal 7 source application has new data, please refresh the source database."))},Pa=function(e){var t=e.name,a=Object(n.useContext)(oe),i=a.migrations,o=a.lists,l=a.cloudURL;if(!i.length)return null;var c=o.reduce((function(e,t){return e[t.name]=t.currentRows.length,e}),{}),s=c.active,u=c.needsReview,m=c.completed,d=c.skipped,p=c.refresh;if(!s&&!u&&!m)return null;switch(t){case"active":return r.a.createElement(ka,{active:s,needsReview:u,completed:m});case"needsReview":return r.a.createElement(Ra,{active:s,needsReview:u,completed:m});case"completed":return r.a.createElement(_a,{active:s,needsReview:u,completed:m});case"skipped":return r.a.createElement(qa,{skipped:d});case"refresh":return r.a.createElement(Na,{refresh:p,cloudURL:l});default:return null}},Ta=Pa;ba.propTypes={links:s.a.objectOf(s.a.shape({href:s.a.string,title:s.a.string,rel:s.a.string,type:s.a.string}))},ba.defaultProps={links:null},ya.propTypes={cloudURL:s.a.string,cloudTitle:s.a.string},ya.defaultProps={cloudURL:null,cloudTitle:"your Acquia Cloud application"},ka.propTypes={active:s.a.number.isRequired,needsReview:s.a.number.isRequired,completed:s.a.number.isRequired},Ra.propTypes={active:s.a.number.isRequired,needsReview:s.a.number.isRequired,completed:s.a.number.isRequired},_a.propTypes={active:s.a.number.isRequired,needsReview:s.a.number.isRequired,completed:s.a.number.isRequired},qa.propTypes={skipped:s.a.number.isRequired},Na.propTypes={refresh:s.a.number.isRequired,cloudURL:s.a.string},Na.defaultProps={cloudURL:null},Pa.propTypes={name:s.a.string.isRequired};var Ca=function(e,t){switch(t.type){case"selectSingle":return e.includes(t.id)===t.value?e:t.value?[].concat(O()(e),[t.id]):e.filter((function(e){return e!==t.id}));case"selectAll":return t.value?Object(L.r)(t.migrations,t.operation).map((function(e){return e.id})):[];case"selectAvailable":var a=Object(L.r)(t.migrations,t.operation).map((function(e){return e.id}));return e.filter((function(e){return a.includes(e)}));default:return e}},Sa=function(e,t){var a=Object(L.k)(e,t),r=Array.from(a.keys()).sort().join("-"),i=Object(n.useState)([]),o=E()(i,2),l=o[0],c=o[1],s=Object(n.useState)(""),u=E()(s,2),m=u[0],d=u[1],p=Object(n.useReducer)(Ca,[]),f=E()(p,2),g=f[0],b=f[1];Object(n.useEffect)((function(){g.length&&b({type:"selectAvailable",operation:m,migrations:e})}),[m]),Object(n.useEffect)((function(){""!==r&&(c(Array.from(a)),d(a.has("import")?"import":a.keys().next().value))}),[r]);var v=g.length===Object(L.r)(e,m).length;return{operation:m,setOperation:d,options:l,selections:g,checked:v,selectSingle:function(e){Object.entries(e).forEach((function(e){var t=E()(e,2),a=t[0],n=t[1];b({type:"selectSingle",id:a,value:n})}))},selectAll:function(t){b({type:"selectAll",value:t,operation:m,migrations:e})}}},xa=function(e){var t=e.name,a=e.list,i=a.columns,o=a.currentRows,l=a.allowedOps,c=Object(n.useContext)(oe),s=c.migrations,u=c.resetList,m=c.limiters.searchTitle,d=c.isInitialImporting,p=c.isLoading,f=Object(L.B)(a),g=Object(A.a)(),b=d||g,v=!!o.length,h=o.filter((function(e){return"removed"!==e.status})).filter((function(e){return m.test(e)})).map((function(e){return Object(L.i)(e.id,s)})),E=Object(n.useRef)(null),y=Sa(h,l),O=y.options,w=y.operation,j=y.setOperation,k=y.selections,R=y.checked,_=y.selectSingle,q=y.selectAll;return Object(n.useEffect)((function(){f&&setTimeout((function(){u(t)}),1500)}),[f]),r.a.createElement("div",{className:"migration_view"},r.a.createElement(Ta,{name:t}),v?r.a.createElement(Qt,{parentRef:E},r.a.createElement("div",{className:"sticky-outer"},i.includes("actions")&&r.a.createElement(ga,{migrations:h,options:O,operation:w,setOperation:j,selections:k,selectAll:q}),r.a.createElement("div",{className:"sticky-enabled",ref:E},r.a.createElement("table",{className:"migrations__list"},r.a.createElement("thead",null,r.a.createElement("tr",null,i.includes("actions")&&r.a.createElement("th",null,r.a.createElement(sa.a,{id:"allMigrations",options:{checked:R,disabled:b},toggle:function(){q(!R)}})),i.includes("name")&&r.a.createElement("th",null,"Name"),i.includes("status")&&r.a.createElement("th",null,"Status"),i.includes("imported")&&r.a.createElement("th",{className:"col--align"},"Imported/Total"),i.includes("messages")&&r.a.createElement("th",{className:"col--align"},"Messages"),i.includes("lastImported")&&r.a.createElement("th",null,"Last Imported"),i.includes("ops")&&r.a.createElement("th",{className:"col--align"},"Operations"))),r.a.createElement("tbody",null,r.a.createElement(Wt,null,o.filter((function(e){return m.test(e)})).map((function(e){return r.a.createElement(da,{key:e.key,data:e,columns:i,operation:w,selections:k,selectSingle:_})})))))))):r.a.createElement(Be.a,{pending:p,empty:"No migrations available."}))},Da=xa;xa.propTypes={name:s.a.string.isRequired,list:s.a.shape({title:s.a.string,initialized:s.a.bool,activeCount:s.a.number,columns:s.a.arrayOf(s.a.string),currentRows:s.a.arrayOf(s.a.object),filter:s.a.func,sort:s.a.func,path:s.a.string,to:s.a.string,allowedOps:s.a.arrayOf(s.a.string)}).isRequired};var La=function(e,t){var a=Object(n.useState)(0),r=E()(a,2),i=r[0],o=r[1];return Object(n.useEffect)((function(){if(e){var a=new ResizeObserver((function(){var a=e.getBoundingClientRect();o(a[t])}));return a.observe(e),function(){a.unobserve(e)}}}),[e]),i},Ia=a(91),Ma=function(){var e=Object(n.useContext)(oe),t=e.lists,a=e.links,i=e.migrations,o=e.modal,l=e.safeToCloseApp,c=document.querySelector(".content-header"),s=document.querySelector(".content-header .tabs-wrapper"),u=La(c,"height"),m=La(s,"height");ht(l);return Object(n.useEffect)((function(){return document.documentElement.style.setProperty("--page-height","calc((100vh - var(--offset-top)) + (var(--header-height) - var(--tabs-height)))"),document.documentElement.style.setProperty("--migration-list-height","calc(100vh - var(--header-height))"),function(){document.documentElement.style.setProperty("--page-height","none")}}),[]),Object(n.useEffect)((function(){document.documentElement.style.setProperty("--header-height","".concat(u,"px")),document.documentElement.style.setProperty("--tabs-height","".concat(m,"px"))}),[u,m]),r.a.createElement("div",{className:"region-content"},r.a.createElement(g.a,null,r.a.createElement(Xe.a,null,r.a.createElement(Je.a,null,r.a.createElement(Ke.a,{href:"../../",title:"Home"},"Home")),r.a.createElement(Je.a,null,r.a.createElement("span",null,"Migrations"))),r.a.createElement(Ze.a,{title:"Migrations"}),i?r.a.createElement(vt,{migrations:O()(i.filter((function(e){return!e.skipped})))}):null,r.a.createElement($e.a,null,t.map((function(e){return r.a.createElement(et.a,{key:"tab-".concat(e.name),to:e.to},e.title,r.a.createElement("span",{className:"badge ".concat(e.showNew(e)?"badge--has-new":null)},e.activeCount))})))),r.a.createElement(xt,null),r.a.createElement(Dt,null),a&&Object(L.x)(a)?r.a.createElement(Lt,null):r.a.createElement(Ia.a,null,t.map((function(e){return r.a.createElement(Da,{key:"migration-list-".concat(e.name),list:e,name:e.name,path:e.path})}))),r.a.createElement(v,null,o?r.a.createElement(at,{title:o.title,message:o.message,action:o.action,cancel:o.cancel}):null))},Aa=function(e){var t=e.basepath,a=e.basepathModule,n=e.basepathPreselect,i=e.source,o=e.cloudURL;return r.a.createElement("div",{className:"migrate-ui"},r.a.createElement(le,{basepath:t,basepathModule:a,basepathPreselect:n,source:i,cloudURL:o},r.a.createElement(l.c,{basepath:t,primary:!1},r.a.createElement(Ma,{path:"/*"}),r.a.createElement(wt,{path:"migration/:id/*"}))))},Qa=new d.a,Fa=m()({},{dispatch:function(e){return Qa.logEvent(e)}})(Aa);Aa.propTypes={basepath:s.a.string.isRequired,basepathModule:s.a.string.isRequired,basepathPreselect:s.a.string.isRequired,source:s.a.string.isRequired};var Ua=a(54),Wa=a(26),za=a.n(Wa),Ha=a(48),Va=a.n(Ha),Ya={r:atob("aHR0cHM6Ly95b3V0dS5iZS9vSGc1U0pZUkhBMA=="),c:atob("Y25hbWU="),d:atob("aHR0cHM6Ly9kbnMuZ29vZ2xlL3Jlc29sdmU="),l:["YWNxdWlhLXNpdGVzLmNvbQ==","YWhkZXYuY2xvdWQ=","YWhkZXYuY28=","YWNxdWlhLmNvbQ==","bG9jYWxob3N0","MTI3LjAuMC4x","LnRlc3Q=","ZGRldi5zaXRl","bG5kby5zaXRl","LmRvY2tzYWw=","LmRk"].map(atob)};function Ga(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ba(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ga(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Za(e,t){return t.some((function(t){return function(e,t){var a=e.toLowerCase(),n=t.toLowerCase(),r=new RegExp(".".concat(n,".?$"));return a===n||r.test(a)}(e,t)}))}var Xa=Va()("config"),Ja=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};W()(this,e),Object.defineProperty(this,Xa,{writable:!0,value:void 0}),za()(this,Xa)[Xa]=Ba(Ba({},Ya),t)}return H()(e,[{key:"validate",value:function(){var e=window.location.hostname,t=za()(this,Xa)[Xa],a=t.c,n=t.d,r=t.l;return new Promise((function(t){Za(e,r)&&t(!0);var i=new URL(n);i.searchParams.set("name",e),i.searchParams.set("type",a),fetch(i.toString()).then((function(e){return e.ok||t(!1),e.json()})).then((function(e){switch(e.Status){case 0:t(e.hasOwnProperty("answer")&&e.Answer.some((function(e){return Za(e.data,r)})));break;case 3:return t(!0);default:return t(!1)}})).catch((function(){t(!1)}))}))}}]),e}(),Ka=a(43),$a=Object(Tt.a)(Ct.a);document.addEventListener("DOMContentLoaded",(function(){var e=new Ja,t=document.querySelector("#decoupled-page-root"),n=t.getAttribute("data-module-path");a.p="/".concat(n,"/ui/dist/"),e.validate().then((function(e){e||(Object(i.unmountComponentAtNode)(t),Object(i.render)(r.a.createElement(Ct.a,{error:new Ka.a("An unexpected error occurred. Code: 1101")}),t))}));var o=t.getAttribute("data-basepath"),l=t.getAttribute("data-basepath-preselect"),c=t.getAttribute("data-basepath-module"),s=t.getAttribute("data-source"),u=t.getAttribute("data-ah-cloud-url");(new d.a).init(t.getAttribute("data-tracking-api-key"),Object(Ua.a)(t),void 0),t&&Object(i.render)(r.a.createElement(q.b,null,r.a.createElement(q.d,null,r.a.createElement(Fa,{basepath:o,basepathModule:c,basepathPreselect:l,source:s,cloudURL:u})),r.a.createElement(q.a,null,r.a.createElement($a,null))),t)}))}});