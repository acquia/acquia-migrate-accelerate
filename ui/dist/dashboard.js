!function(e){function t(t){for(var a,o,l=t[0],c=t[1],s=t[2],m=0,d=[];m<l.length;m++)o=l[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={1:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(e){return o.p+""+({5:"tracker"}[e]||e)+".bundle.js"}(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(s);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,n[1](c)}r[e]=void 0}};var s=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;i.push([228,0]),n()}({156:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(29),o=n.n(i),l=(n.p,n(156),n(30)),c=n(1),s=n.n(c),u=n(20),m=n.n(u),d=n(23),p=n(5),f=n.n(p),g=n(32),b=function(e){var t=e.children,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){return n.current=document.createElement("div"),n.current.setAttribute("id","modal"),document.body.appendChild(n.current),function(){document.body.removeChild(n.current)}}),[]),n.current?o.a.createPortal(t,n.current):null},v=b;b.propTypes={children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node])},b.defaultProps={children:null};var E=n(2),y=n.n(E),O=n(9),h=n.n(O),j=function(){var e=Object(a.useState)(null),t=y()(e,2),n=t[0],r=t[1];return{modal:n,showModal:function(e,t,n){r({title:e,message:t,action:function(){n(),r(null)},cancel:function(){return r(null)}})}}},w=n(65),_=n(24),k=n(63),P=function(e){return 1===e.progressRatio&&!e.next},N=n(15);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e,t){return e.find((function(e){return function(e,t){return e.qid===t.qid}(e,t)}))||{id:null,qid:null,start:null,next:null,pending:null}},C=function(e,t){return T(e,t).pending},S=function(e,t){var n=e.findIndex((function(e){return e.qid===t.qid})),a=e[n+1];return a?{qid:a.qid,id:a.id}:{}},x=function(e,t){switch(t.type){case"add":var n="".concat(e.queue.length,"-").concat(t.item.id);return{active:e.active.hasOwnProperty("qid")?e.active:{id:t.item.id,qid:n},queue:[].concat(h()(e.queue),[R({progressRatio:0,qid:n},t.item)])};case"request":return R(R({},e),{},{queue:e.queue.map((function(e){return e.qid===t.item.qid?R(R({},e),{},f()({pending:!0},t.item.link,null)):e}))});case"update":return{active:t.item.next?e.active:S(e.queue,e.active,t.item),queue:e.queue.map((function(e){return e.qid===t.item.qid?R(R({},e),{},{start:null,next:null,pending:!1},t.item):e}))};case"cleanup":return R(R({},e),{},{queue:e.queue.filter((function(e){return(e.start||e.next||e.pending)&&1!==e.progressRatio}))});case"remove":return{active:e.active&&e.active.qid===t.qid?S(e.queue,e.active):e.active,queue:e.queue.filter((function(e){return e.qid!==t.qid}))};case"clear":return C(e.queue,e.active)?R(R({},e),{},{queue:e.queue.filter((function(e){return e.pending}))}):{active:{},queue:[]};default:return e}},I=function(){var e=Object(a.useContext)(N.c).throwError,t=Object(_.a)(!0),n=y()(t,2),r=n[0],i=n[1],o=Object(_.a)(!1),l=y()(o,2),c=l[0],s=l[1],u=Object(a.useReducer)(x,{queue:[],active:{}}),m=y()(u,2),d=m[0],p=m[1],f=d.queue,g=d.active,b=T(f,g),v=b.start,E=b.next,O=b.pending,h=Object(w.a)({deferFn:k.b}),j=h.data,q=h.run;Object(a.useEffect)((function(){j&&p({type:"update",item:j})}),[j]),Object(a.useEffect)((function(){if(v&&r&&!c){var t=T(f,g),n=t.qid,a=t.start.href;O||(p({type:"request",item:{qid:n,link:"start"}}),q({method:"POST",href:a,qid:n,throwError:e}))}}),[v,r]),Object(a.useEffect)((function(){if(E&&r&&!c){var t=T(f,g),n=t.qid,a=t.next.href;O||(p({type:"request",item:{qid:n,link:"next"}}),q({method:"GET",href:a,qid:n,throwError:e}))}}),[E,r]),Object(a.useEffect)((function(){c&&p({type:"clear"})}),[c,O]),Object(a.useEffect)((function(){0!==f.length||r||i()}),[f.length]);var R=function(e){return e.every(P)}(f),S=C(f,g);return{active:g,queue:f,addToQueue:function(e){c&&s(),p({type:"add",item:e})},removeFromQueue:function(e){p({type:"remove",qid:e})},cleanupQueue:function(){p({type:"cleanup"})},isQueueRunning:r,setQueueRunning:i,setQueueClear:function(){c||s()},isQueueStopped:c,isQueueCompleted:R,isActivePending:S}},D=n(82),F=n(50),L=n(3),Q=n(83),M=n(10),A=n.n(M),H=n(11),U=n.n(H),z=n(43),V=n.n(z),B=n(13),G=n.n(B),W=n(14),J=n.n(W),K=n(7),Y=n.n(K);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Y()(e);if(t){var r=Y()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return J()(this,n)}}var X=function(e){G()(n,e);var t=$(n);function n(){return A()(this,n),t.apply(this,arguments)}return U()(n,[{key:"withValue",value:function(e){return new n({name:this.name,value:e})}},{key:"test",value:function(e){return V()(Y()(n.prototype),"test",this).call(this,[e.label])}}]),n}(n(84).a);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e,t){var n=e.id,a=e.attributes,r=e.relationships,i=e.links,o=a.label,l=a.lastImported,c=a.processedCount,s=a.importedCount,u=a.totalCount,m=a.completed,d=a.skipped,p=a.activity,f=r.dependencies,g=r.consistsOf,b={importedCount:Object(L.z)(s,u),processedCount:Object(L.z)(c,u),totalCount:u},v=Object(L.A)(ee(ee({},b),{},{completed:m,skipped:d,links:i}));return ee(ee({id:n,index:t,label:o,status:v,activity:p,lastImported:l},b),{},{completed:m,skipped:d,dependencies:f.data.map((function(e){var t=e.meta.dependencyReasons;return{id:e.id,dependencyReasons:t}})),consistsOf:g.data.map((function(e){return{id:e.id}})),links:i})},ne=[{name:"active",title:"In Progress",path:"/",to:"./",initialized:!1,columns:["actions","name","status","imported","messages","ops"],currentRows:[],filter:L.d,sort:L.G},{name:"needs-review",title:"Needs Review",path:"needs-review",to:"needs-review",initialized:!1,columns:["actions","name","imported","messages","lastImported","ops"],currentRows:[],filter:L.c,sort:L.H},{name:"completed",title:"Completed",path:"completed",to:"completed",initialized:!1,columns:["actions","name","imported","messages","lastImported","ops"],currentRows:[],filter:function(e){return e.filter((function(e){return e.completed}))},sort:L.H},{name:"skipped",title:"Skipped",path:"skipped",to:"skipped",initialized:!1,columns:["name","imported","messages","ops"],currentRows:[],filter:function(e){return e.filter((function(e){return e.skipped}))},sort:L.G}],ae=function(e,t,n,a,r,i){return{id:e,label:t,index:r,lastImported:i,page:n,status:a}},re=function(e,t){if("remove"===t.type)return e.map((function(e){return e.name===t.page?function(e,t){return ee(ee({},e),{},{currentRows:e.currentRows.filter((function(e){return e.id!==t}))})}(e,t.id):e}));if("reset"===t.type){var n=e.find((function(e){return e.name===t.page})).currentRows.filter((function(e){return"new"===e.status})).map((function(e){return e.id}));return e.map((function(e){return e.name===t.page?function(e){return ee(ee({},e),{},{currentRows:h()(e.currentRows.map((function(e){return"new"===e.status?ee(ee({},e),{},{status:"initial"}):e})))})}(e):function(e,t){var n=e.currentRows.filter((function(e){return t.includes(e.id)&&"removed"===e.status})).map((function(e){return e.id}));return n.length?ee(ee({},e),{},{currentRows:e.currentRows.filter((function(e){return!n.includes(e.id)}))}):e}(e,n)}))}var a,r;return a=e,r=t.migrations,a.reduce((function(e,t){var n=t.filter(r);if(0!==t.currentRows.length||a.every((function(e){return e.initialized}))){var i=t.currentRows.filter((function(e){return"removed"!==e.status})).map((function(e){return e.id})),o=n.map((function(e){return e.id})),l=i.filter((function(e){return!o.includes(e)})),c=o.filter((function(e){return!i.includes(e)}));c.length&&(t.currentRows=t.sort([].concat(h()(t.currentRows),h()(n.filter((function(e){return c.includes(e.id)})).map((function(e){return ae(e.id,e.label,t.name,"new",e.index,e.lastImported)})))))),l.length&&(t.currentRows=t.sort(t.currentRows.map((function(e){return l.includes(e.id)?ee(ee({},e),{},{status:"removed"}):e}))))}else t.currentRows=t.sort(n.map((function(e){return ae(e.id,e.label,t.name,"initial",e.index,e.lastImported)})));return t.activeCount=t.currentRows.filter((function(e){return"removed"!==e.status})).length,t.initialized||(t.initialized=!0),[].concat(h()(e),[t])}),[])},ie=r.a.createContext({}),oe=function(e){var t=e.basepath,n=e.basepathPreselect,i=e.source,o=e.children,l=Object(a.useState)([]),c=y()(l,2),s=c[0],u=c[1],m=Object(a.useState)(null),d=y()(m,2),p=d[0],f=d[1],g=Object(a.useState)(null),b=y()(g,2),v=b[0],E=b[1],O=Object(a.useState)(!1),h=y()(O,2),w=h[0],_=h[1],P=Object(Q.a)({searchTitle:new X({name:"searchTitle",value:""})}),q=P.limiters,R=P.updateLimiter,T=j(),C=T.modal,S=T.showModal,x=Object(a.useReducer)(re,ne),M=y()(x,2),A=M[0],H=M[1],U=I(),z=U.active,V=U.queue,B=U.addToQueue,G=U.removeFromQueue,W=U.cleanupQueue,J=U.isQueueRunning,K=U.setQueueRunning,Y=U.setQueueClear,$=U.isQueueStopped,Z=U.isQueueCompleted,ee=U.isActivePending,ae=Object(D.a)(p).bulkUpdateMigrations,oe=Object(a.useContext)(N.c).throwError,le=Object(F.a)({href:i,handleError:oe}),ce=le.isLoading,se=le.document;Object(a.useEffect)((function(){se&&(E(Object(L.t)(se.links)&&!w?se.links["initial-import"]:null),f(se.links),u(se.data.map(te)))}),[se]),Object(a.useEffect)((function(){s.length&&H({type:"update",migrations:s})}),[s]),Object(a.useEffect)((function(){v&&_(!0)}),[v]);return r.a.createElement(ie.Provider,{value:{lists:A,links:p,initialImportLink:v,isInitialImporting:w,setInitialImporting:_,migrations:s,limiters:q,updateLimiter:R,modal:C,updateMigration:function(e){var t=e.link,n=e.toggle,a=void 0===n?function(){}:n,r=e.callback,i=void 0===r?function(){}:r,o=t.href,l=t.rel,c=t.title,s=t.params,u=Object(L.g)(l);if(u){var m=s.confirm,d=s.data,p=function(){a(),Object(k.c)({href:o,method:u,payload:{data:d}}).then((function(){a(),i()}))};m?S(c,m,p):p()}else console.error("No method found for rel",l)},removeFromList:function(e,t,n){H({type:"remove",id:e,page:t}),n&&G(n.qid)},resetList:function(e){H({type:"reset",page:e}),W()},active:z,queue:V,addToQueue:B,removeFromQueue:G,isQueueRunning:J,setQueueRunning:K,setQueueClear:Y,isQueueStopped:$,isQueueCompleted:Z,isActivePending:ee,basepath:t,basepathPreselect:n,isLoading:ce,bulkUpdateMigrations:ae}},o)};oe.propTypes={basepath:s.a.string.isRequired,basepathPreselect:s.a.string.isRequired,source:s.a.string.isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var le=function(e){var t=e.id,n=e.previewable,i=e.children,o=Object(a.useContext)(ie).basepath;return r.a.createElement("div",{className:"migration__title"},r.a.createElement(l.a,{title:i,to:"".concat(o,"/migration/").concat(t).concat(n?"/preview":"")},i))},ce=le;le.propTypes={id:s.a.string.isRequired,previewable:s.a.bool,children:s.a.string},le.defaultProps={previewable:!1,children:""};var se=function(e){var t=e.one,n=e.two;return r.a.createElement("div",{className:"layout-row clearfix"},r.a.createElement("div",{className:"layout-column layout-column--half"},t),r.a.createElement("div",{className:"layout-column layout-column--half"},n))},ue=se;se.propTypes={one:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),two:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node])},se.defaultProps={one:null,two:null};var me=function(e){var t=e.header,n=e.padding,a=e.children;return r.a.createElement("div",{className:"panel"},t&&r.a.createElement("h3",{className:"panel__title"},t),n?r.a.createElement("div",{className:"panel__content"},a):a)},de=me;me.propTypes={header:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]),padding:s.a.bool,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired},me.defaultProps={header:null,padding:!0};var pe=function(e){var t=e.dependencies,n=e.consistsOf,i=e.track;return Object(a.useEffect)((function(){i("User viewed details")}),[]),r.a.createElement(ue,{one:r.a.createElement(de,{header:"Dependencies"},t.length?r.a.createElement("ul",{className:"migration__details_dependencies admin-list--panel admin-list"},t.map((function(e){return r.a.createElement("li",{key:e.id,className:"admin-item--panel"},r.a.createElement("h5",null,r.a.createElement(ce,{id:e.id},e.label)),e.dependencyReasons&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"".concat(e.id,"-migrations")},"Because of:"),r.a.createElement("ul",{id:"".concat(e.id,"-migrations")},e.dependencyReasons.map((function(t){return r.a.createElement("li",{key:"".concat(e.id,"-").concat(t)},r.a.createElement("code",null,t))})))))}))):r.a.createElement("div",{className:"messages messages--warning"},r.a.createElement("p",null,"No dependencies found."))),two:r.a.createElement(de,{header:"Underlying Migrations"},n.length?r.a.createElement("ul",{className:"migration__details_underlying admin-list--panel admin-list"},n.map((function(e){return r.a.createElement("li",{key:e.id,className:"admin-item--panel"},r.a.createElement("code",null,e.id))}))):r.a.createElement("p",null,r.a.createElement("em",null,"No underlying migrations listed.")))})},fe=pe;pe.propTypes={dependencies:s.a.arrayOf(s.a.shape({id:s.a.string})),consistsOf:s.a.arrayOf(s.a.shape({id:s.a.string})),track:s.a.func},pe.defaultProps={dependencies:[],consistsOf:[],track:function(){}};var ge=n(62),be=n.n(ge),ve=function(e){var t=e.value;return Object(L.B)(t).split("; ").map((function(e,t){return r.a.createElement("code",{key:t},e)}))},Ee=function(e){var t=e.row;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("code",null,t.sourceFieldName)," →"," ",r.a.createElement("code",null,t.destinationFieldName)),r.a.createElement("td",null,r.a.createElement(ve,{value:t.sourceValueSimplified})),r.a.createElement("td",null,r.a.createElement(ve,{value:t.destinationValueSimplified})))},ye=function(e){var t=e.list;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Mapping"),r.a.createElement("th",null,"Source"),r.a.createElement("th",null,"Destination"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(Ee,{key:"".concat(e.sourceFieldName,"-").concat(e.destinationFieldName),row:e})}))))},Oe=ye;ve.propTypes={value:s.a.oneOfType([s.a.array,s.a.string])},ve.defaultProps={value:""},Ee.propTypes={row:s.a.shape({sourceFieldName:s.a.string,sourceValue:s.a.any,sourceValueSimplified:s.a.any,destinationFieldName:s.a.string,destinationValue:s.a.any,destinationValueSimplified:s.a.any}).isRequired},ye.propTypes={list:s.a.arrayOf(s.a.shape({sourceFieldName:s.a.string,sourceValue:s.a.any,sourceValueSimplified:s.a.any,destinationFieldName:s.a.string,destinationValue:s.a.any,destinationValueSimplified:s.a.any}))},ye.defaultProps={list:[]};var he=function(e){var t=e.html;return r.a.createElement("div",{className:"migration_preview__live"},r.a.createElement("iframe",{srcDoc:t,title:"Content preview"}))},je=he;he.propTypes={html:s.a.string.isRequired};var we=n(19),_e=n(12),ke=n(47),Pe=function(e){var t=e.id,n=e.href,a=e.title,i=e.setHref,o=e.setEvent;return r.a.createElement("a",{className:"".concat(t," button button--small"),role:"button",href:"#",onClick:function(e){e.preventDefault(),i(n),o({type:"User previewed row",migrationPreviewQuery:Object(_e.b)(n)})}},a)},Ne=function(e){var t=e.link,n=e.setHref,i=e.setEvent,o=e.offsetLinks,l=Object(a.useState)(""),c=y()(l,2),s=c[0],u=c[1],m=t["uri-template:suggestions"][0],d=m.label,p=m.variable;return r.a.createElement("form",{className:"exposed-form exposed-form--labeled",onSubmit:function(e){e.preventDefault(),i({type:"User previewed by search",migrationPreviewSearchTerm:s}),n(Object(_e.a)(f()({},p,s),t["uri-template:href"]))}},r.a.createElement(ke.a,{name:"preview_search",label:d,size:"40",type:"search",value:s,validation:{pattern:"(https?://|^/)(.*)"},onChange:function(e){u(e.target.value)}},"Source site URL should be either ",r.a.createElement("em",null,"relative")," (begin with"," ",r.a.createElement("code",null,"/"),")",r.a.createElement("br",null),"or ",r.a.createElement("em",null,"absolute")," (begin with ",r.a.createElement("code",null,"http://"),")"),r.a.createElement("div",{className:"form-actions form-item exposed-form__item--actions"},r.a.createElement("input",{type:"submit",className:"button form-submit",value:"Go"})),r.a.createElement("div",{className:"form-item exposed-form__item--divider"},r.a.createElement("strong",null,"or")),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{className:"form-item__label"},"Browse available rows"),r.a.createElement("div",{className:"migration__preview__links",role:"group","aria-label":"Offset rows"},o.map((function(e){var t=e.id,a=e.href,o=e.title;return r.a.createElement(Pe,{key:"offset-".concat(t),id:t,href:a,title:o,setHref:n,setEvent:i})})))))},qe=Ne;function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Pe.propTypes={id:s.a.string.isRequired,href:s.a.string.isRequired,title:s.a.oneOfType([s.a.string,s.a.node]).isRequired,setHref:s.a.func.isRequired,setEvent:s.a.func},Pe.defaultProps={setEvent:function(){}},Ne.propTypes={link:s.a.shape({rel:s.a.string,href:s.a.string,title:s.a.string,"uri-template:href":s.a.string,"uri-template:suggestions":s.a.arrayOf(s.a.object)}).isRequired,offsetLinks:s.a.arrayOf(s.a.object),setHref:s.a.func.isRequired,setEvent:s.a.func},Ne.defaultProps={offsetLinks:[],setEvent:function(){}};var Ce=function(e,t){var n=t.href;return Object(L.p)({href:n})},Se=function(e){var t=e.links,n=e.track,i=Te(Te({},t["preview-by-offset"]),{},{id:"next"}),o=t["preview-by-url"],l=Object(a.useState)([i]),c=y()(l,2),s=c[0],u=c[1],m=Object(a.useState)({raw:[],html:""}),d=y()(m,2),p=d[0],f=d[1],g=Object(a.useState)(i.href),b=y()(g,2),v=b[0],E=b[1],O=Object(a.useState)({type:"User previewed row",migrationPreviewQuery:Object(_e.b)(i.href)}),h=y()(O,2),j=h[0],_=h[1],k=Object(w.a)({deferFn:Ce,href:v}),P=k.data,N=k.run;if(Object(a.useEffect)((function(){v&&N()}),[v]),Object(a.useEffect)((function(){if(P){var e="";if(P instanceof Error)e=P.message,console.error(P),v!==i.href&&E(i.href);else{e="OK";var t=P.data,a=t.attributes,r=t.links;u(r?Object.entries(r).map((function(e){var t=y()(e,2),n=t[0];return Te(Te({},t[1]),{},{id:n})})):[i]),f(a)}!function(e){if(j){var t=j.type,a=be()(j,["type"]);n(t,Te(Te({},a),{},{migrationPreviewResponse:e})),_(null)}}(e)}}),[P]),!P)return r.a.createElement(we.a,{message:"Loading…"});if(p){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Preview source site content in Drupal 9 by searching for a URL or by viewing the next available row."),r.a.createElement(qe,{link:o,setHref:E,setEvent:_,offsetLinks:s}),r.a.createElement(ue,{one:r.a.createElement(de,{padding:!1},r.a.createElement(Oe,{list:p.raw})),two:r.a.createElement(de,{header:"Content Preview",padding:!1},r.a.createElement(je,{html:p.html}))}))}},xe=function(e){var t=e.preview;return r.a.createElement("div",{className:"migration__preview--no-preview"},Object.entries(t).map((function(e){var t=y()(e,2),n=t[0],a=t[1];return r.a.createElement("div",{key:n,className:"messages messages--warning"},r.a.createElement("p",null,a.title))})))},Ie=function(e){var t=e.preview,n=e.track;return r.a.createElement("div",{className:"migration__preview"},Object.values(t.links).length>0?r.a.createElement(Se,{links:t.links,track:n}):r.a.createElement(xe,{preview:t.unmet}))},De=Ie;Se.propTypes={links:s.a.shape({"preview-by-offset":s.a.object,"preview-by-url":s.a.object}).isRequired,track:s.a.func},xe.propTypes={preview:s.a.objectOf(s.a.object).isRequired},Ie.propTypes={preview:s.a.shape({links:s.a.object,unmet:s.a.object}).isRequired,track:s.a.func},Se.defaultProps={track:function(){}},Ie.defaultProps={track:function(){}};var Fe=n(75),Le=n.n(Fe),Qe=function(e){var t=e.button,n=e.className,a=e.action,i=t.title,o=t.rel;return r.a.createElement("a",{title:i,rel:o,className:n,role:"button",onClick:function(e){e.preventDefault(),a()}},i)},Me=Qe;function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Qe.propTypes={button:s.a.shape({title:s.a.string.isRequired,rel:s.a.string.isRequired}).isRequired,className:s.a.string,action:s.a.func},Qe.defaultProps={className:"",action:function(){}};var Ue=function(){return r.a.createElement("td",null,"— —")},ze=function(e){var t=e.mapping,n=t.sourceFieldName,a=t.destinationFieldName,i=t.destinationFieldType,o=t.destinationFieldLabel,l=t.destinationFieldIsRequired,c=t.migrationProcessPlugins_THIS_WILL_CHANGE,s=t.overrides,u=n?r.a.createElement("td",null,r.a.createElement("code",null,n)):r.a.createElement(Ue,null),m=a?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"migration__mapping_destination_fields"},r.a.createElement("code",null,a),r.a.createElement("p",null,o,l?r.a.createElement("abbr",{title:"Required Field"},"*"):"")),r.a.createElement("td",null,r.a.createElement("em",null,i))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,null),r.a.createElement(Ue,null)),d=c?r.a.createElement("td",null,r.a.createElement("code",null,Object(L.B)(c))):r.a.createElement(Ue,null),p=s.length?r.a.createElement("td",null,s.map((function(e){return r.a.createElement(Me,{key:"$override-{override.label}",button:{title:e.title,rel:e.rel},className:"button",action:e.action})}))):null;return r.a.createElement("tr",null,u,m,d,p)},Ve=function(e){var t=e.links,n=e.unmet,a=e.update;return r.a.createElement("div",{className:"mapping__updates"},r.a.createElement("ul",{className:"menu"},t.map((function(e){return r.a.createElement("li",{key:e.title},r.a.createElement(Me,{button:{title:e.title,rel:e.rel},className:"button",action:function(){return a(e)}}))}))),n.map((function(e){return r.a.createElement("div",{key:e.href,className:"messages messages--warning"},r.a.createElement("p",null,e.title))})))},Be=function(e){var t=e.mapping,n=e.track,i=Object(a.useContext)(ie).updateMigration;Object(a.useEffect)((function(){n("User viewed mapping")}),[]);var o=Object(w.a)({promiseFn:L.p,href:t.href}),l=o.data,c=o.isPending,s=o.reload,u=function(e,t){var a={"Skip source field":{type:"User skipped field",value:"migrationDestinationFieldName"}};a[e]&&n(a[e].type,f()({},a[e].value,t))};if(!t.href)return r.a.createElement("div",{className:"migration__mapping migration__mapping--no-mapping"},r.a.createElement("div",{className:"messages messages--warning"},"No Mapping information available."));if(c)return r.a.createElement(we.a,{message:"Loading…"});if(l instanceof Error)return r.a.createElement("div",{className:"migration__mapping migration__mapping--has-error"},r.a.createElement("div",{className:"messages messages--error"},r.a.createElement("p",null,"Error: ",l.message),r.a.createElement("p",null,t.href)));var m=function(e){i({link:e,callback:s})},d=l.data,p=d.attributes,g=d.links,b=Object(L.s)(g),v=Object(L.r)(g),E=Object(L.k)(g),O=Object.entries(p).filter((function(e){var t=y()(e,2)[1];return"object"===Le()(t)})).reduce((function(e,t){var n=y()(t,2),a=n[0],r=n[1],i=Object.entries(r).map((function(e){var t=y()(e,2),n=t[0],r=t[1],i="".concat(a,"-").concat(n);return E?{key:i,value:He(He({},r),{},{overrides:Object(_e.d)(r,E,m,u)})}:{key:i,value:r}}));return[].concat(h()(e),h()(i))}),[]);return r.a.createElement("div",{className:"migration__mapping"},r.a.createElement(Ve,{links:b,unmet:v,update:m}),r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Source Field"),r.a.createElement("th",null,"Destination Field"),r.a.createElement("th",null,"Field Type"),r.a.createElement("th",null,"Process Plugins"),r.a.createElement("th",null,!!E.length&&"Operations"))),r.a.createElement("tbody",null,O.map((function(e){var t=e.key,n=e.value;return r.a.createElement(ze,{key:t,mapping:n})}))))))},Ge=Be;ze.propTypes={mapping:s.a.shape({sourceFieldName:s.a.string,destinationFieldName:s.a.string,destinationFieldType:s.a.string,destinationFieldLabel:s.a.string,destinationFieldIsRequired:s.a.bool,migrationProcessPlugins_THIS_WILL_CHANGE:s.a.array,overrides:s.a.array}).isRequired},Ve.propTypes={links:s.a.arrayOf(s.a.object),unmet:s.a.arrayOf(s.a.object),update:s.a.func.isRequired},Ve.defaultProps={links:[],unmet:[]},Be.propTypes={mapping:s.a.shape({href:s.a.string,rel:s.a.string,title:s.a.string}),track:s.a.func},Be.defaultProps={mapping:{href:"",rel:"",title:""},track:function(){}};var We=n(33),Je=n(41),Ke=n(21),Ye=n(16),$e=n(67),Xe=n(51),Ze=function(e){var t=e.title,n=e.message,i=e.action,o=e.cancel,l=e.isModal,c=Object(a.useRef)(null),s=Object(_.a)(!1),u=y()(s,2),m=u[0],d=u[1],p=function(e){27===e.keyCode&&o()};return Object(a.useEffect)((function(){return document.addEventListener("keydown",p),function(){document.removeEventListener("keydown",p)}}),[]),Object(a.useEffect)((function(){c.current&&c.current.focus()}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{tabIndex:"-1",role:"dialog",className:"ui-dialog",ref:c},r.a.createElement("div",{className:"ui-dialog-titlebar"},r.a.createElement("span",{className:"ui-dialog-title"},t),r.a.createElement("button",{type:"button",title:"Close",className:"ui-dialog-titlebar-close ui-button-icon-only",onClick:o},r.a.createElement("span",{className:"ui-icon ui-icon-closethick"}),"Close")),r.a.createElement("div",{className:"ui-dialog-content ui-widget-content"},r.a.createElement("p",null,n)),r.a.createElement("div",{className:"ui-dialog-buttonpane ui-widget-content"},r.a.createElement("div",{className:"ui-dialog-buttonset"},r.a.createElement("button",{type:"button",className:"button",disabled:m,onClick:function(){d(),i()}},m?r.a.createElement(we.a,null):"OK")))),l?r.a.createElement("div",{className:"ui-widget-overlay",onClick:o}):null)},et=Ze;Ze.propTypes={title:s.a.string.isRequired,message:s.a.string,action:s.a.func.isRequired,cancel:s.a.func.isRequired,isModal:s.a.bool},Ze.defaultProps={message:null,isModal:!0};var tt=function(e){var t=e.title,n=e.pending;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(g.a,null,r.a.createElement(Je.a,null,r.a.createElement(Ke.a,null,r.a.createElement(Ye.a,{href:"../../",title:"Home"},"Home")),r.a.createElement(Ke.a,null,r.a.createElement("span",null,"Migrations"))),r.a.createElement(We.a,{title:t}),n?r.a.createElement(we.a,{message:"Loading…"}):r.a.createElement("p",null,"No valid migrations found.")))},nt=tt;tt.propTypes={title:s.a.string.isRequired,pending:s.a.bool.isRequired};var at=n(52),rt=function(e){var t=e.active,n=e.amount,a=t?"swooshy--is-swooshing":"",i=Object(at.b)({amount:n}),o=parseInt(n,10),l="translateY(-".concat(o<100?o:100,"%)");return r.a.createElement("div",{className:"swooshy ".concat(a)},r.a.createElement("div",{className:"swooshy__inner"},r.a.createElement("div",{className:"swooshy__fill",style:{transform:l}}),r.a.createElement("div",{className:"swooshy__amount"},r.a.createElement(at.a.span,null,i.amount.interpolate((function(e){return parseFloat(e).toFixed(2)}))),"%")))},it=rt;rt.propTypes={active:s.a.bool,amount:s.a.string},rt.defaultProps={active:!1,amount:"0.00"};var ot=function(){var e=document.getElementsByTagName("body")[0],t=Object(a.useState)(parseInt(e.style.paddingTop,10)),n=y()(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=new MutationObserver((function(){i(parseInt(e.style.paddingTop,10))}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),function(){t.disconnect()}}),[]),r},lt=function(e){var t=e.isPending,n=e.isRunning,a=e.isStopped;return r.a.createElement("span",null,!n&&(t?"Pausing queue, waiting on response":"Queue paused"),a&&(t?"Stopping queue, waiting on response":"Queue stopped"))},ct=function(){return r.a.createElement("span",null,"No queued migrations")},st=function(){var e=Object(a.useContext)(ie),t=e.queue,n=e.isActivePending,i=e.isQueueRunning,o=e.isQueueStopped;return r.a.createElement("div",{className:"migration_info__queue_status"},t.length?r.a.createElement(lt,{isPending:n,isRunning:i,isStopped:o}):r.a.createElement(ct,null))};lt.propTypes={isPending:s.a.bool,isRunning:s.a.bool,isStopped:s.a.bool},lt.defaultProps={isPending:!1,isRunning:!1,isStopped:!1};var ut=n(25),mt=function(){var e=Object(a.useContext)(ie),t=e.queue,n=e.isQueueRunning,i=e.setQueueRunning,o=e.setQueueClear,l=e.isQueueStopped,c=!!t.length;return r.a.createElement("div",{className:"migration_info__queue_controls"},r.a.createElement("button",{className:"button button--small",title:"Stop and clear the queue",type:"button",onClick:function(){o()},disabled:l||!c},r.a.createElement(ut.a,{icon:"square",size:"16"})),r.a.createElement("button",{className:"button button--small",title:n?"Pause queue":"Continue queue",type:"button",disabled:!c,onClick:function(){i()}},r.a.createElement(ut.a,{icon:n?"pause":"play",size:"16"})))};function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=function(e,t){return e.reduce((function(e,n){return e+n[t]}),0)},gt=function(e){var t=e.href,n=e.title;return r.a.createElement("a",{href:t,title:n,className:"admin-item__link"},n)},bt=function(e){var t,n=e.migrations,i=Object(a.useContext)(ie),o=i.active,l=i.links,c=ot(),s=Object(L.C)(n),u=ft(n,"importedCount"),m=ft(n,"totalCount"),d=1===n.length,p=d?{label:(t=n[0]).label,infoLinks:t.links}:{label:null,infoLinks:l},f=p.label,g=p.infoLinks,b=g?Object.entries(g).filter((function(e){return"text/html"===y()(e,2)[1].type})).map((function(e){var t,n,a=y()(e,2),r=a[0],i=a[1],o=((n={"https://github.com/acquia/acquia_migrate#link-rel-migration-messages":{title:"Total errors: ".concat((t=i).title)}}).hasOwnProperty(t.rel)?n[t.rel]:{title:t.title}).title;return pt(pt({id:r},i),{},{title:d?o:i.title})})):[],v=o.hasOwnProperty("id"),E="Data ".concat(v?"importing":"imported");return Object(a.useEffect)((function(){document.documentElement.style.setProperty("--offset-top","".concat(c,"px"))}),[c]),r.a.createElement("div",{className:"migration_info"},r.a.createElement(it,{active:v,amount:Object(L.E)(s)}),r.a.createElement("div",{className:"migration_info__data"},r.a.createElement("h5",{className:"migration_info__title"},E,f?" (".concat(f,")"):"",r.a.createElement("span",null,":"," ",r.a.createElement("span",{className:"tabular"},u,"/",m))),r.a.createElement("ul",{className:"migration_info__list"},b.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(gt,{title:e.title,href:e.href}))}))),!d&&r.a.createElement("div",{className:"migration_info__queue"},r.a.createElement(st,null),r.a.createElement(mt,null))))},vt=bt;function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}gt.propTypes={title:s.a.string.isRequired,href:s.a.string.isRequired},bt.propTypes={migrations:s.a.arrayOf(s.a.shape({id:s.a.string,index:s.a.number,label:s.a.string,consistsOf:s.a.arrayOf(s.a.object),dependencies:s.a.arrayOf(s.a.object),lastImported:s.a.object,links:s.a.object,importedCount:s.a.number,processedCount:s.a.number,totalCount:s.a.number,skipped:s.a.bool,completed:s.a.bool,status:s.a.object}))},bt.defaultProps={migrations:[]};var Ot=function(e){var t=e.id,n=Object(u.useTracking)(),i=Object(a.useContext)(ie),o=i.migrations,c=i.isLoading,s=i.modal,m=o.find((function(e){return e.id===decodeURIComponent(t)}));if(Object(a.useEffect)((function(){document.documentElement.style.setProperty("--page-height","none")}),[]),!o.length)return r.a.createElement(nt,{title:"Migration: …",pending:c});var d=m.label,p=m.processedCount,f=m.totalCount,b=m.dependencies,E=m.consistsOf,y=m.links,O=Object.values(y).find((function(e){return"https://github.com/acquia/acquia_migrate#link-rel-migration-mapping"===e.rel})),h=Object(L.m)(y),j=h.preview,w=h.previewable,_=b.map((function(e){return yt(yt({},e),{},{label:o.find((function(t){return t.id===e.id})).label})})),k=function(e,a){n.trackEvent(yt(yt({type:e},a),{migrationID:t,migrationUnderlyingList:E.map((function(e){return e.id}))}))};return r.a.createElement("div",{className:"migrate-ui__migration_detail region-content"},r.a.createElement(g.a,null,r.a.createElement(Je.a,null,r.a.createElement(Ke.a,null,r.a.createElement(Ye.a,{href:"../../../../",title:"Home"},"Home")),r.a.createElement(Ke.a,null,r.a.createElement(l.a,{to:"../../"},"Migrations")),r.a.createElement(Ke.a,null,r.a.createElement("span",null,d))),r.a.createElement(We.a,{title:"Migration: ".concat(d)}),r.a.createElement(vt,{migrations:[m]}),r.a.createElement($e.a,null,w?r.a.createElement(Xe.a,{to:"preview"},"Preview"):null,r.a.createElement(Xe.a,{to:"./"},"Mapping"),r.a.createElement(Xe.a,{to:"details"},"Details"))),r.a.createElement(l.c,{primary:!1},w&&r.a.createElement(De,{path:"preview",preview:j,completed:p===f,track:k}),r.a.createElement(Ge,{path:"/",mapping:O,track:k}),r.a.createElement(fe,{path:"details",dependencies:_,consistsOf:E,track:k})),r.a.createElement(v,null,s?r.a.createElement(et,{title:s.title,message:s.message,action:s.action,cancel:s.cancel}):null))},ht=Ot;Ot.propTypes={id:s.a.string},Ot.defaultProps={id:""};var jt=function(e){var t=e.value,n=e.className,a=Object(at.b)({value:t});return r.a.createElement(at.a.span,{className:"tabular ".concat(n)},a.value.interpolate(Math.round))},wt=jt;jt.propTypes={value:s.a.oneOfType([s.a.number,s.a.string]).isRequired,className:s.a.string},jt.defaultProps={className:""};var _t=function(e){var t=e.label,n=e.value,a=e.children,i=e.type,o=void 0===i?"inline":i,l=e.modifier,c=void 0===l?"small":l;return r.a.createElement("div",{className:"".concat("inline"===o?"ajax-progress ajax-progress-bar":""," ").concat("small"===c?"progress--small":"")},r.a.createElement("div",{className:"progress","aria-live":"polite"},r.a.createElement("div",{className:"progress__label",title:t},t),r.a.createElement("div",{className:"progress__track"},r.a.createElement("div",{className:"progress__bar",style:{width:"".concat(n,"%")}})),r.a.createElement("div",{className:"progress__percentage"},r.a.createElement(wt,{value:n}),"%"),r.a.createElement("div",{className:"progress__description"},a)))},kt=_t;_t.propTypes={label:s.a.string.isRequired,value:s.a.number.isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired,type:s.a.string,modifier:s.a.string},_t.defaultProps={type:"inline",modifier:"small"};var Pt=function(e){var t=e.item,n=t.title,a=t.progressRatio,i=t.errors?a||100:100*a;return r.a.createElement(kt,{label:n,value:i,type:"full",modifier:"large"},r.a.createElement("span",null,"Please wait for this import to finish before leaving this window."))},Nt=function(){var e=I(),t=e.active,n=e.queue,i=e.addToQueue,o=e.isQueueCompleted,l=e.cleanupQueue,c=t.qid||"",s=Object(a.useContext)(ie),u=s.initialImportLink,m=s.setInitialImporting;return Object(a.useEffect)((function(){if(u){var e=u.title,t=u.href;i({id:"initialImport",title:e,start:{href:t},operation:"import"})}}),[u]),Object(a.useEffect)((function(){n.length&&o&&setTimeout((function(){l(),m(!1)}),1e3)}),[c]),r.a.createElement("div",{className:"initial_import"},n.map((function(e){return r.a.createElement(Pt,{key:e.qid,item:e})})))};Pt.propTypes={item:s.a.shape({title:s.a.string,progressRatio:s.a.number,errors:s.a.object}).isRequired};var qt=n(64),Rt=n(68),Tt=n(70),Ct=Object(Rt.a)(Tt.a),St=function(){return r.a.createElement(N.b,null,r.a.createElement(N.d,null,r.a.createElement(Nt,null)),r.a.createElement(N.a,{prototype:qt.a},r.a.createElement(Ct,null)))},xt=function(){var e=Object(a.useContext)(ie).basepathPreselect;return r.a.createElement("div",null,r.a.createElement("h2",null,"Migration data not yet chosen."),r.a.createElement("p",null,r.a.createElement(Ye.a,{href:e,title:"Select data to migrate"},r.a.createElement("span",null,"Choose which data to import from your source site")),r.a.createElement("span",null,", then you will be guided back to this dashboard to start migrations!")))},It=function(e){var t=e.buttons,n=e.pending,a=Object(_.a)(!1),i=y()(a,2),o=i[0],l=i[1];return r.a.createElement("div",{className:"dropdown dropleft"},n?r.a.createElement(we.a,null):r.a.createElement("a",{role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":o,onClick:l},r.a.createElement(ut.a,{icon:"more-vertical"})),r.a.createElement("div",{className:"dropdown-menu ".concat(o?"show":"")},t.map((function(e){return r.a.createElement(Me,{key:e.key,button:e,className:"dropdown-item",action:function(){l(),e.action()}})}))))},Dt=It;It.propTypes={buttons:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,rel:s.a.string.isRequired,title:s.a.string.isRequired,action:s.a.func.isRequired})),pending:s.a.bool.isRequired},It.defaultProps={buttons:[],pending:!1};var Ft=r.a.createContext(),Lt=function(e){var t=e.parentRef,n=e.children,i=t.current?t.current.scrollTop:0,o=Object(a.useState)(""),l=y()(o,2),c=l[0],s=l[1],u=Object(at.b)((function(){return{offset:0,from:{offset:0},reset:!0,onFrame:function(e){var n=e.offset;t.current&&t.current.scrollTo(0,n)}}})),m=y()(u,2)[1];return r.a.createElement(Ft.Provider,{value:{scrollParent:function(e){m({from:{offset:i},offset:e})},isChildFocused:function(e){return c===e},focusChild:function(e){s(e),setTimeout((function(){s("")}),1e3)}}},n)};Lt.propTypes={parentRef:s.a.shape({current:s.a.element}).isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var Qt=function(e){var t=e.dependencies,n=Object(_.a)(!1),i=y()(n,2),o=i[0],l=i[1],c=Object(a.useContext)(Ft).focusChild;return r.a.createElement("div",{className:"dropdown dropleft"},r.a.createElement("a",{className:"dropdown-toggle",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":o,onClick:l},r.a.createElement(ut.a,{icon:"chevron-down"})),r.a.createElement("div",{className:"dropdown-menu ".concat(o?"show":"")},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"dropdown-item"},e.incomplete?r.a.createElement("a",{title:"jump to ".concat(e.label," migration"),className:"migration__".concat(e.incomplete?"danger":"success"," migration__import-status"),onClick:function(){return t=e.id,l(),void c(t);var t}},e.label):e.label)}))))},Mt=function(e){var t=e.dependencies,n=e.activity,a=e.hasImported,i=e.showDependencies,o=e.link,l="Not available",c="muted";if(!o&&!i)return r.a.createElement("span",{className:"migration__".concat(c," migration__import-status")},l);var s=t.length>0;if("idle"!==n)c="working",l="importing"===n?"Importing …":"rollingBack"===n?"Rolling back …":"Unknown activity …";else if(i&&s){var u=s&&t.some((function(e){return e.incomplete}));l=u?"Unmet dependencies":"No unmet dependencies",c=u?"danger":"success"}else o?(l="Ready for ".concat(o.title),c="success"):l=a?"Already imported":"Not ready";return r.a.createElement("div",{className:"migration__status"},r.a.createElement("span",{className:"migration__".concat(c," migration__import-status")},l),i&&s&&r.a.createElement(Qt,{dependencies:t}))},At=Mt;Qt.propTypes={dependencies:s.a.arrayOf(s.a.object)},Qt.defaultProps={dependencies:[]},Mt.propTypes={dependencies:s.a.arrayOf(s.a.object),hasImported:s.a.bool.isRequired,showDependencies:s.a.bool.isRequired,link:s.a.shape({rel:s.a.string,title:s.a.string,href:s.a.string})},Mt.defaultProps={dependencies:[],link:null};var Ht=n(237),Ut=n(236),zt=n(148),Vt=n(149),Bt=n(235),Gt=n(44),Wt=function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},Jt=function(e){var t=e.start;return r.a.createElement("span",null,"started ",Object(Ht.a)(t,Date.now()),r.a.createElement("br",null),"still in progress")},Kt=function(e){var t=e.startTime,n=e.endTime,i=e.start,o=e.end,l=e.duration,c=Object(a.useState)(!1),s=y()(c,2),u=s[0],m=s[1],d=Object(a.useState)(Date.now()),p=y()(d,2),f=p[0],g=p[1],b=Object(Ut.a)(i,{addSuffix:!0,includeSeconds:!0}),v=Object(zt.a)(i,Gt.a),E=Object(zt.a)(o,Gt.a),O=Object(Ht.a)(i,f),h=Object(Vt.a)(f,i)>60?3e4:2e3,j=Object(Bt.a)(Object(Gt.c)(l));return Wt((function(){return g(Date.now())}),h),r.a.createElement("div",{className:"migration__last_imported"},r.a.createElement("a",{onClick:function(){return m(!u)},title:O},b,r.a.createElement("br",null),"took ",j||"less than a second"),r.a.createElement("div",{className:"migration__last_imported_details ".concat(u?"migration__last_imported_details--is-visible":"")},"Started: ",r.a.createElement("span",{title:t},v),r.a.createElement("br",null),"Finished: ",r.a.createElement("span",{title:n},E)))},Yt=function(e){var t=e.imported;if(!t)return r.a.createElement("span",null,"Not imported");var n=t.startTime,a=t.endTime,i=t.duration,o=Object(Gt.b)(n);if(!a)return r.a.createElement(Jt,{start:o});var l=Object(Gt.b)(a);return r.a.createElement(Kt,{startTime:n,endTime:a,start:o,end:l,duration:i})},$t=Yt;Jt.propTypes={start:s.a.instanceOf(Date).isRequired},Kt.propTypes={startTime:s.a.string.isRequired,endTime:s.a.string.isRequired,start:s.a.instanceOf(Date).isRequired,end:s.a.instanceOf(Date).isRequired,duration:s.a.number.isRequired},Yt.propTypes={imported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number})},Yt.defaultProps={imported:null};var Xt=function(e){var t=e.status,n=e.importedCount,a=e.totalCount,i=t.code,o=t.message,l=["IMPORTED_WARN","IMPORTING_ERR","IMPORTED_ERR"].includes(i)?"".concat("migration__import-status migration","__warning"):"";return r.a.createElement("span",{title:o,className:l},r.a.createElement(wt,{value:n}),"/",r.a.createElement("span",{className:"tabular"},a))},Zt=Xt;Xt.propTypes={status:s.a.shape({code:s.a.string,message:s.a.string}).isRequired,importedCount:s.a.number.isRequired,totalCount:s.a.number.isRequired};var en=function(e){var t=e.imported;if(!t)return null;var n=t.startTime,a=t.endTime,i=t.duration;if(a||i)return null;var o=Object(Gt.b)(n);return r.a.createElement("span",null,"started ",Object(Ht.a)(o,Date.now()))},tn=function(e){var t=e.label,n=e.item,i=e.imported,o=n.id,l=n.qid,c=n.operation,s=n.pending,u=n.errors,m=Object(a.useContext)(ie),d=m.migrations,p=m.removeFromQueue,f=Object(L.D)(Object(L.h)(o,d),c),g=u?f||100:100*f;return r.a.createElement("div",{className:"migration_progress"},r.a.createElement(kt,{label:t,value:g},r.a.createElement(en,{imported:i})),r.a.createElement("div",{className:"migration_progress__cancel"},s?r.a.createElement("span",{title:"Pending response"},r.a.createElement(ut.a,{icon:"circle"})):r.a.createElement("a",{rel:"https://github.com/acquia/acquia_migrate#link-rel-dequeue-item",onClick:function(){p(l)},title:"Cancel",role:"button","aria-label":"Cancel"},r.a.createElement(ut.a,{icon:"cancel"}),r.a.createElement("span",{className:"visually-hidden"},"Cancel"))))},nn=tn;en.propTypes={imported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number})},en.defaultProps={imported:null},tn.propTypes={label:s.a.string,item:s.a.shape({id:s.a.string,qid:s.a.string,operation:s.a.string,pending:s.a.bool,errors:s.a.object}).isRequired,imported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number})},tn.defaultProps={label:"",imported:null};var an=n(54),rn=function(e){var t=e.className,n=e.children;return r.a.createElement("td",{className:t},r.a.createElement("div",null,n))},on=function(e){var t=e.data,n=e.columns,i=e.operation,o=e.selections,l=e.selectSingle,c=t.id,s=t.page,u=t.status,m=Object(a.useContext)(ie),d=m.migrations,p=m.updateMigration,g=m.removeFromList,b=m.isInitialImporting,v=m.active,E=m.queue,O=Object(a.useContext)(Ft),h=O.scrollParent,j=O.isChildFocused,w=Object(_.a)(),k=y()(w,2),P=k[0],N=k[1],q=Object(a.useRef)(null),R=Object(L.h)(c,d),T=Object(L.o)(c,E),C=R.label,S=R.status,x=R.activity,I=R.importedCount,D=R.totalCount,F=R.lastImported,Q=R.links,M=Object(L.m)(Q).previewable,A=Object(L.b)(R,d,"import"),H=Q.hasOwnProperty("rollback"),U=v&&v.id===c,z=!!T,V="removed"===u,B=j(c),G=Q.hasOwnProperty(i),W={checked:!!G&&(o.hasOwnProperty(c)&&o[c]),disabled:b||!G||V};Object(a.useEffect)((function(){V&&setTimeout((function(){g(c,s,T)}),1500)}),[V]),Object(a.useEffect)((function(){return B&&q.current&&h(q.current.offsetTop-q.current.offsetHeight),function(){l(f()({},c,!1))}}),[B]);var J=Object(L.s)(Q).map((function(e){var t=e.title,n=e.rel;return{key:"".concat(c,"-").concat(t),title:t,rel:n,action:function(){p({link:e,toggle:N})}}})),K=Q["migration-messages"];return r.a.createElement("tr",{id:c,ref:q,className:"migration table_row ".concat(V?"migration__removed migration__removed--".concat(Object(L.i)(R)):""," ").concat(B?"migration__focused":"")},n.includes("actions")&&r.a.createElement(rn,{className:"migration__actions"},z?r.a.createElement(ut.a,{size:"16",icon:U?"zap":"clock"}):r.a.createElement(an.a,{id:c,options:W,toggle:function(){l(f()({},c,!W.checked))}})),n.includes("name")&&r.a.createElement(rn,null,T?r.a.createElement(nn,{item:T,label:C,imported:F}):r.a.createElement(ce,{id:c,previewable:M},C)),n.includes("status")&&r.a.createElement(rn,{className:"migration_row__status"},r.a.createElement(At,{activity:x,dependencies:A,hasImported:H,showDependencies:"import"===i,link:G?Q[i]:null})),n.includes("imported")&&r.a.createElement(rn,{className:"migration_row__imported_count col--align"},r.a.createElement(Zt,{status:S,importedCount:I,totalCount:D})),n.includes("messages")&&r.a.createElement(rn,{className:"migration_row__message_count col--align"},K?r.a.createElement(Ye.a,{href:K.href,title:"View ".concat(C," messages")},r.a.createElement(wt,{value:K.title})):r.a.createElement("span",{className:"tabular"},"0")),n.includes("lastImported")&&r.a.createElement(rn,{className:"migration_row__last_imported"},r.a.createElement($t,{imported:F})),n.includes("ops")&&r.a.createElement(rn,{className:"migration_row__operations col--align"},r.a.createElement(Dt,{buttons:J,pending:P})))},ln=on;function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}rn.propTypes={className:s.a.string,children:s.a.oneOfType([s.a.arrayOf(s.a.element),s.a.element]).isRequired},rn.defaultProps={className:""},on.propTypes={data:s.a.shape({id:s.a.string,index:s.a.number,lastImported:s.a.shape({startTime:s.a.string,endTime:s.a.string,duration:s.a.number}),page:s.a.string,status:s.a.string}).isRequired,columns:s.a.arrayOf(s.a.string).isRequired,operation:s.a.string.isRequired,selections:s.a.objectOf(s.a.bool),selectSingle:s.a.func.isRequired},on.defaultProps={selections:{}};var sn=function(e){var t=e.migrations,n=e.options,i=e.operation,o=e.setOperation,l=e.selections,c=e.selectAll,s=Object(u.useTracking)(),m=Object(a.useContext)(ie),d=m.addToQueue,p=m.limiters.searchTitle,g=m.updateLimiter,b=Object.entries(l).filter((function(e){return y()(e,2)[1]}));return r.a.createElement("div",{className:"migration__operations"},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),"import"===i){var n=b.reduce((function(e,n){var a=y()(n,1)[0],r=Object(L.h)(a,t),i=r.processedCount,o=r.totalCount,l=r.consistsOf;return e.migrationInitiatedQuantity+=1,e.migrationInitiatedRows+=o-i,e.migrationInitiatedList.push(a),e.migrationInitiatedUnderlyingList=[].concat(h()(e.migrationInitiatedUnderlyingList),h()(l.map((function(e){return e.id})))),e}),{migrationInitiatedQuantity:0,migrationInitiatedRows:0,migrationInitiatedList:[],migrationInitiatedUnderlyingList:[]});s.trackEvent(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"User initiated migration"},n))}b.forEach((function(e){var n=y()(e,1)[0],a=Object(L.h)(n,t),r=a.id,o=a.label,l=a.links[i].href;d({id:r,title:o,start:{href:l},operation:i})})),c(!1)},className:"migrate__exposed-form"},r.a.createElement("div",{className:"migrate__exposed-form__item"},r.a.createElement("select",{name:"migration__operations_selector",id:"migration__operations_selector",className:"form-element form-element--type-select",onChange:function(e){o(e.target.value)},value:i},n.map((function(e){var t=y()(e,2),n=t[0],a=t[1];return r.a.createElement("option",{key:n,value:n},a)})))),r.a.createElement("div",{className:"migrate__exposed-form__item migrate__exposed-form__item--actions"},r.a.createElement("button",{type:"submit",disabled:""===i||!b.length,className:"button button--primary form-submit"},b.length?"Apply to (".concat(b.length,") selected"):"No migrations selected")),r.a.createElement(ke.a,{name:p.name,type:"search",value:p.value,size:"30",placeholder:"Filter by migration name",onChange:function(e){g(p.name,e.target.value)}})))},un=sn;function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}sn.propTypes={migrations:s.a.arrayOf(s.a.shape({id:s.a.string,index:s.a.number,label:s.a.string,consistsOf:s.a.arrayOf(s.a.object),dependencies:s.a.arrayOf(s.a.object),lastImported:s.a.object,links:s.a.object,importedCount:s.a.number,processedCount:s.a.number,totalCount:s.a.number,skipped:s.a.bool,completed:s.a.bool,status:s.a.object})),options:s.a.arrayOf(s.a.array),operation:s.a.string,setOperation:s.a.func.isRequired,selections:s.a.objectOf(s.a.bool),selectAll:s.a.func.isRequired},sn.defaultProps={migrations:[],operation:"",options:[],selections:{}};var pn=function(e,t){switch(t.type){case"selectSingle":return dn(dn({},e),t.selected);case"selectAll":return Object.fromEntries(Object(L.q)(t.migrations,t.operation).map((function(e){return[e.id,t.value]})));default:return e}},fn=function(e){var t=Object(L.j)(e),n=Array.from(t.keys()).sort().join("-"),r=Object(a.useState)([]),i=y()(r,2),o=i[0],l=i[1],c=Object(a.useState)(""),s=y()(c,2),u=s[0],m=s[1],d=Object(a.useState)(!1),p=y()(d,2),f=p[0],g=p[1],b=Object(a.useReducer)(pn,{}),v=y()(b,2),E=v[0],O=v[1];Object(a.useEffect)((function(){g(!1),O({type:"selectAll",value:!1,operation:u,migrations:e})}),[u]),Object(a.useEffect)((function(){""!==n&&(l(Array.from(t)),m(t.has("import")?"import":t.keys().next().value))}),[n]);return{operation:u,setOperation:m,options:o,selections:E,checked:f,selectSingle:function(e){O({type:"selectSingle",selected:e})},selectAll:function(t){g(t),O({type:"selectAll",value:t,operation:u,migrations:e})}}},gn=function(e){var t=e.name,n=e.list,i=n.columns,o=n.currentRows,l=Object(a.useContext)(ie),c=l.migrations,s=l.resetList,u=l.limiters.searchTitle,m=l.isInitialImporting,d=Object(L.x)(n),p=o.filter((function(e){return"removed"!==e.status})).filter((function(e){return u.test(e)})).map((function(e){return Object(L.h)(e.id,c)})),f=Object(a.useRef)(null),g=fn(p),b=g.options,v=g.operation,E=g.setOperation,y=g.selections,O=g.checked,h=g.selectSingle,j=g.selectAll;return Object(a.useEffect)((function(){d&&setTimeout((function(){s(t)}),1500)}),[d]),r.a.createElement(Lt,{parentRef:f},r.a.createElement("div",{className:"sticky-outer"},i.includes("actions")&&r.a.createElement(un,{migrations:p,options:b,operation:v,setOperation:E,selections:y,selectAll:j}),r.a.createElement("div",{className:"sticky-enabled",ref:f},r.a.createElement("table",{className:"migrations__list"},r.a.createElement("thead",null,r.a.createElement("tr",null,i.includes("actions")&&r.a.createElement("th",null,r.a.createElement(an.a,{id:"allMigrations",options:{checked:O,disabled:m},toggle:function(){j(!O)}})),i.includes("name")&&r.a.createElement("th",null,"Name"),i.includes("status")&&r.a.createElement("th",null,"Status"),i.includes("imported")&&r.a.createElement("th",{className:"col--align"},"Imported/Total"),i.includes("messages")&&r.a.createElement("th",{className:"col--align"},"Messages"),i.includes("lastImported")&&r.a.createElement("th",null,"Last Imported"),i.includes("ops")&&r.a.createElement("th",{className:"col--align"},"Operations"))),r.a.createElement("tbody",null,o.filter((function(e){return u.test(e)})).map((function(e){return r.a.createElement(ln,{key:e.id,data:e,columns:i,operation:v,selections:y,selectSingle:h})})))))))},bn=gn;gn.propTypes={name:s.a.string.isRequired,list:s.a.shape({title:s.a.string,initialized:s.a.bool,activeCount:s.a.number,columns:s.a.arrayOf(s.a.string),currentRows:s.a.arrayOf(s.a.object),filter:s.a.func,sort:s.a.func,path:s.a.string,to:s.a.string}).isRequired};var vn=function(e,t){var n=Object(a.useState)(0),r=y()(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){if(e){var n=new ResizeObserver((function(){var n=e.getBoundingClientRect();o(n[t])}));return n.observe(e),function(){n.unobserve(e)}}}),[e]),i},En=n(86),yn=function(){var e=Object(a.useContext)(ie),t=e.lists,n=e.links,i=e.initialImportLink,o=e.migrations,l=e.modal,c=document.querySelector(".content-header"),s=document.querySelector(".content-header .tabs-wrapper"),u=vn(c,"height"),m=vn(s,"height");return Object(a.useEffect)((function(){document.documentElement.style.setProperty("--page-height","calc((100vh - var(--offset-top)) + (var(--header-height) - var(--tabs-height)))"),document.documentElement.style.setProperty("--migration-list-height","calc(100vh - var(--header-height))")}),[]),Object(a.useEffect)((function(){document.documentElement.style.setProperty("--header-height","".concat(u,"px")),document.documentElement.style.setProperty("--tabs-height","".concat(m,"px"))}),[u,m]),r.a.createElement("div",{className:"region-content"},r.a.createElement(g.a,null,r.a.createElement(Je.a,null,r.a.createElement(Ke.a,null,r.a.createElement(Ye.a,{href:"../../",title:"Home"},"Home")),r.a.createElement(Ke.a,null,r.a.createElement("span",null,"Migrations"))),r.a.createElement(We.a,{title:"Migrations"}),o?r.a.createElement(vt,{migrations:h()(o.filter((function(e){return!e.skipped})))}):null,r.a.createElement($e.a,null,t.map((function(e){return r.a.createElement(Xe.a,{key:"tab-".concat(e.name),to:e.to},e.title,r.a.createElement("span",{className:"badge ".concat(Object(L.x)(e)?"badge--has-new":"")},e.activeCount))})))),n?null:r.a.createElement(we.a,{message:"Loading…"}),r.a.createElement(St,{link:i}),n&&Object(L.u)(n)?r.a.createElement(xt,null):r.a.createElement(En.a,null,t.map((function(e){return r.a.createElement(bn,{key:"migration-list-".concat(e.name),list:e,name:e.name,path:e.path})}))),r.a.createElement(v,null,l?r.a.createElement(et,{title:l.title,message:l.message,action:l.action,cancel:l.cancel}):null))},On=function(e){var t=e.basepath,n=e.basepathPreselect,a=e.source;return r.a.createElement("div",{className:"migrate-ui"},r.a.createElement(oe,{basepath:t,basepathPreselect:n,source:a},r.a.createElement(l.c,{basepath:t,primary:!1},r.a.createElement(yn,{path:"/*"}),r.a.createElement(ht,{path:"migration/:id/*"}))))},hn=new d.a,jn=m()({},{dispatch:function(e){return hn.logEvent(e)}})(On);On.propTypes={basepath:s.a.string.isRequired,basepathPreselect:s.a.string.isRequired,source:s.a.string.isRequired};var wn=n(48),_n=Object(Rt.a)(Tt.a);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#decoupled-page-root"),t=e.getAttribute("data-module-path");n.p="/".concat(t,"/ui/dist/");var a=e.getAttribute("data-basepath"),o=e.getAttribute("data-basepath-preselect"),l=e.getAttribute("data-source");(new d.a).init(e.getAttribute("data-tracking-api-key"),Object(wn.a)(e),void 0),e&&Object(i.render)(r.a.createElement(N.b,null,r.a.createElement(N.d,null,r.a.createElement(jn,{basepath:a,basepathPreselect:o,source:l})),r.a.createElement(N.a,null,r.a.createElement(_n,null))),e)}))}});