!function(e){function t(t){for(var n,o,l=t[0],s=t[1],u=t[2],d=0,m=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);m.length;)m.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={3:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=n);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(e){return o.p+""+({5:"tracker"}[e]||e)+".bundle.js"}(e);var s=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(u);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",s.name="ChunkLoadError",s.type=n,s.request=i,a[1](s)}r[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=s;i.push([230,0]),a()}({230:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),o=a(23),l=a(1),s=a.n(l),u=a(20),c=a.n(u),d=a(30),m=a(2),p=a.n(m),f=a(19),g=function(e){var t=e.pending;return r.a.createElement("div",null,t?r.a.createElement(f.a,{message:"Loadingâ€¦"}):r.a.createElement("p",null,r.a.createElement("em",null,"No Module info")))},h=g;g.propTypes={pending:s.a.bool.isRequired};var b=a(62),v=a.n(b),y=a(75),E=a.n(y),_=a(25),O=a(16),j=a(24),k=a(3),w=function(e){var t=e.title,a=e.version;return r.a.createElement("div",{className:"datagrid__item"},r.a.createElement("span",{className:"source-module__title"},t," ",a))},N=function(e){var t=e.title,a=e.link,n=e.icon,i=e.help;return r.a.createElement("div",{className:"datagrid__item"},r.a.createElement("span",{className:"recommendation-module__title"},a?r.a.createElement(O.a,{href:a.href,title:t},t):t,n?r.a.createElement("span",{title:i,className:"title__badge"},r.a.createElement(_.a,{icon:n,stroke:"none",size:"18"})):null))},q=function(e){var t=e.instruction;return"object"===E()(t)?r.a.createElement(O.a,{title:t.title,href:t.href},t.title):r.a.createElement("span",null,t)},R=function(e){var t=e.installLabel,a=e.instructions;return r.a.createElement("div",{className:"datagrid__item"},r.a.createElement("span",{className:"module-recommendations__install-status module-recommendations__install-status--".concat(t.modifier),title:t.title},t.label),a?r.a.createElement("div",{className:"module-recommendations__install-instructions"},a.instruction?r.a.createElement(q,{instruction:a.instruction}):null,a.detail?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("code",null,a.detail)):null):null)},T=function(e){var t=e.id,a=e.modules,n=e.link,i=e.vetted;return r.a.createElement("ul",{className:"module-recommendations__module-list"},a.map((function(e){return r.a.createElement("li",{className:"module-recommendations__row-inner module-recommendations__module-list-item",key:"".concat(t,"-").concat(encodeURIComponent(e.displayName).toLowerCase())},r.a.createElement(N,{title:e.displayName,link:n,icon:i?"vetted":null,help:i?"Migration path vetted by Acquia":null}),r.a.createElement(R,{installLabel:e.installLabel,instructions:e.installInstructions}))})))},P=function(e){var t=e.recommendation,a=t.id,n=t.type,i=t.modules,o=t.note,l=t.vetted,s=t.links,u=(s?Object(k.f)(s):[])[0]||null;return r.a.createElement("div",{className:"module-recommendations__recommendation"},i?r.a.createElement(T,{id:a,modules:i,link:u,vetted:l}):null,"abandonmentRecommendation"===n?r.a.createElement(N,{title:"Module obsolete or not recommended",icon:"abandoned"}):null,o?r.a.createElement("div",{className:"datagrid__item"},r.a.createElement("p",{className:"module-recommendations__recommendation-note"},o)):null)},M=function(e){var t=e.module,a=Object(j.a)(!1),n=p()(a,2),i=n[0],o=n[1],l=t.title,s=t.version,u=t.replacementCandidates,c=u.some((function(e){return e.modules&&e.modules.some((function(e){return!!e.installInstructions}))}));return r.a.createElement("div",{className:"module-recommendations__row datagrid__row ".concat(i?"is-expanded":"is-collapsed")},r.a.createElement(w,{title:l,version:s}),r.a.createElement("div",{className:"datagrid__inner"},u.map((function(e){return r.a.createElement(P,{key:"".concat(e.category,"_").concat(e.id,"_").concat(e.modules?e.modules.map((function(e){return e.machineName})).join("_"):"".concat(l,"-").concat(s)),recommendation:e})}))),c?r.a.createElement("a",{className:"dropdown-toggle",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":i,onClick:o},r.a.createElement(_.a,{icon:"chevron-down"})):null)},C=M;w.propTypes={title:s.a.string.isRequired,version:s.a.string.isRequired},N.propTypes={title:s.a.string.isRequired,link:s.a.shape({href:s.a.string,type:s.a.string}),icon:s.a.string,help:s.a.string},N.defaultProps={link:null,icon:null,help:null},q.propTypes={instruction:s.a.oneOfType([s.a.string,s.a.shape({href:s.a.string,title:s.a.string})]).isRequired},R.propTypes={installLabel:s.a.shape({label:s.a.string,title:s.a.string,modifier:s.a.string}).isRequired,instructions:s.a.shape({instruction:s.a.oneOfType([s.a.string,s.a.shape({href:s.a.string,title:s.a.string})]),detail:s.a.string})},R.defaultProps={instructions:null},T.propTypes={id:s.a.string.isRequired,modules:s.a.arrayOf(s.a.shape({displayName:s.a.string,installLabel:s.a.shape({label:s.a.string,title:s.a.string,modifier:s.a.string}),machineName:s.a.string})).isRequired,link:s.a.shape({href:s.a.string,type:s.a.string}),vetted:s.a.bool.isRequired},T.defaultProps={link:null},P.propTypes={recommendation:s.a.shape({note:s.a.string,vetted:s.a.bool,modules:s.a.arrayOf(s.a.shape({displayName:s.a.string,installed:s.a.bool,installLabel:s.a.shape({label:s.a.string,title:s.a.string,modifier:s.a.string}),installInstructions:s.a.oneOfType([s.a.string,s.a.object]),machineName:s.a.string})),requirePackage:s.a.shape({packageName:s.a.string,versionConstraint:s.a.string}),id:s.a.string,links:s.a.shape({about:s.a.shape({href:s.a.string,type:s.a.string})}),type:s.a.string}).isRequired},M.propTypes={module:s.a.shape({id:s.a.string,title:s.a.string,version:s.a.string,replacementCandidates:s.a.arrayOf(s.a.object)}).isRequired};var L=function(e){var t=e.title,a=e.modules,n=e.coreVersion;return r.a.createElement("div",{className:"module-recommendations datagrid"},t?r.a.createElement("h4",null,t):null,r.a.createElement("div",{className:"module-recommendations__header datagrid__header",role:"presentation"},r.a.createElement("div",{className:"datagrid__header-item datagrid__item"},"Drupal ",n),r.a.createElement("div",{className:"datagrid__header-item datagrid__item"},"Drupal 9"),r.a.createElement("div",{className:"datagrid__header-item datagrid__item"},"Module state")),a.map((function(e){return r.a.createElement(C,{key:e.id,module:e})})))},D=function(e){var t=e.title,a=e.modules,n=null,i=a.reduce((function(e,t){if(t.replacementCandidates){var a=t.replacementCandidates.some((function(e){return"core"===e.category}))?"core":"other",r=t.version,i=v()(t,["version"]);e[a].push("core"===a?i:t),"core"!==a||n||(n=r)}else e.other.push(t);return e}),{other:[],core:[]}),o=i.other,l=i.core;return l.length||o.length?r.a.createElement("div",null,o.length?r.a.createElement(L,{title:null,modules:o}):null,l.length?r.a.createElement(L,{title:"Migration path to Drupal 9 core",modules:l,coreVersion:n}):null):r.a.createElement("div",null,"No ",r.a.createElement("em",null,t)," modules to display.")},S=D;L.propTypes={title:s.a.string,modules:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,title:s.a.string.isRequired,version:s.a.string.isRequired})).isRequired,coreVersion:s.a.string},L.defaultProps={title:null,coreVersion:"7"},D.propTypes={title:s.a.string.isRequired,modules:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,title:s.a.string.isRequired,version:s.a.string.isRequired})).isRequired};var I=a(41),x=a(21),A=a(33),U=a(67),V=a(51),F=a(32),H=a(86),J=a(5),z=a.n(J),B=a(15),G=a(50);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=function(e){return e.availableToInstall?e.installed?{label:"Installed",title:"This module is installed",modifier:"installed"}:{label:"Not Enabled",title:"This module is present in the codebase but is not installed",modifier:"not-enabled"}:{label:"Not Installed",title:"This module is not available to install and must be downloaded using composer",modifier:"not-installed"}},X=function(e,t,a){return e.availableToInstall?e.installed?null:{instruction:{href:"/admin/modules",title:"Enable this module"}}:"core"!==t&&a?{instruction:"Install with composer:",detail:"composer require ".concat(a.packageName).concat(a.versionConstraint)}:null},Y=function(e){var t=e.id,a=e.type,n=e.attributes,r=e.links,i=n.modules,o=n.note,l=n.requirePackage,s=n.vetted,u=l&&"drupal/core"===l.packageName?"core":"other";return{id:t,type:a,vetted:s,category:u,note:o,links:r,modules:i?i.map((function(e){return Q(Q({},e),{},{installLabel:W(e),installInstructions:X(e,u,l)})})):[]}},Z=r.a.createContext(),$=function(e){var t=e.basepathDashboard,a=e.source,i=e.children,o=Object(n.useState)([]),l=p()(o,2),s=l[0],u=l[1],c=Object(n.useContext)(B.c).throwError,d=Object(G.b)({href:a,handleError:c}),m=d.isLoading,f=d.document,g=s.reduce((function(e,t){var a=t.recognitionState,n=encodeURI(a.toLowerCase());return e.hasOwnProperty(n)?e[n].modules.push(t):e.unknown.modules.push(t),e}),{found:{name:"found",title:"Found",path:"/",to:"./",modules:[]},unknown:{name:"unknown",title:"Unknown",path:"unknown",to:"unknown",modules:[]}});return Object(n.useEffect)((function(){var e,t,a,n,r;f&&u((e=f.data,t=e.reduce((function(e,t){return e["sourceModule"===t.type?"sourceModules":"destModules"].push(t),e}),{sourceModules:[],destModules:[]}),a=t.sourceModules,n=t.destModules,r=function(e){return function(t){return(Object(k.e)(t,"relationships.recommendedFor.data")||[]).some((function(t){return e.type===t.type&&e.id===t.id}))}},a.map((function(e){return Q(Q({},function(e){return{id:e.id,title:e.attributes.humanName,version:e.attributes.version,recognitionState:e.attributes.recognitionState}}(e)),{},{replacementCandidates:n.filter(r(e)).map(Y)})}))))}),[f]),r.a.createElement(Z.Provider,{value:{isLoading:m,lists:g,basepathDashboard:t}},i)};$.propTypes={basepathDashboard:s.a.string.isRequired,source:s.a.string.isRequired,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var ee=function(){var e=Object(u.useTracking)(),t=Object(n.useContext)(Z),a=t.isLoading,i=t.lists,o=t.basepathDashboard;return Object(n.useEffect)((function(){setTimeout((function(){e.trackEvent({type:"User viewed modules auditor"})}),1e3)}),[]),0===Object.values(i).filter((function(e){return!!e.modules.length})).length?r.a.createElement(h,{pending:a}):r.a.createElement("div",null,r.a.createElement(F.a,null,r.a.createElement(I.a,null,r.a.createElement(x.a,null,r.a.createElement(O.a,{href:"../../",title:"Home"},"Home")),r.a.createElement(x.a,null,r.a.createElement(O.a,{href:o,title:"Migrations"},"Migrations")),r.a.createElement(x.a,null,r.a.createElement("span",null,"Modules"))),r.a.createElement(A.a,{title:"Modules"}),r.a.createElement(U.a,null,Object.entries(i).map((function(e){var t=p()(e,2)[1];return r.a.createElement(V.a,{key:"tab-".concat(t.name),to:t.to},t.title)})))),r.a.createElement(H.a,null,Object.entries(i).map((function(e){var t=p()(e,2),a=t[0],n=t[1];return r.a.createElement(S,{title:n.title,path:n.path,key:a,modules:n.modules})}))))},te=function(e){var t=e.basepath,a=e.basepathDashboard,n=e.source;return r.a.createElement("div",{className:"migrate-ui"},r.a.createElement($,{basepathDashboard:a,source:n},r.a.createElement(d.c,{basepath:t,primary:!1},r.a.createElement(ee,{path:"/*"}))))},ae=new o.a,ne=c()({},{dispatch:function(e){return ae.logEvent(e)}})(te);te.propTypes={basepath:s.a.string.isRequired,basepathDashboard:s.a.string.isRequired,source:s.a.string.isRequired};var re=a(48);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#decoupled-page-root"),t=e.getAttribute("data-module-path");a.p="/".concat(t,"/ui/dist/");var n=e.getAttribute("data-basepath"),l=e.getAttribute("data-basepath-dashboard"),s=e.getAttribute("data-source");(new o.a).init(e.getAttribute("data-tracking-api-key"),Object(re.a)(e),void 0),e&&Object(i.render)(r.a.createElement(ne,{basepath:n,basepathDashboard:l,source:s}),e)}))}});