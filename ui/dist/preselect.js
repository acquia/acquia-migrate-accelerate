!function(e){function t(t){for(var a,l,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(s&&s(t);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={4:0},i=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var i,o=document.createElement("script");o.charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.src=function(e){return l.p+""+({5:"tracker"}[e]||e)+".bundle.js"}(e);var c=new Error;i=function(t){o.onerror=o.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:o})}),12e4);o.onerror=o.onload=i,document.head.appendChild(o)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var s=c;i.push([227,0]),n()}({227:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(22),l=n(17),o=n(10),c=n.n(o),u=n(7),s=n.n(u),d=n(1),p=n.n(d),m=n(50),f=n(11),g=n(58),b=n(45),h=function(e){var t=e.id,n=e.attributes,a=e.relationships,r=e.links,i=n.label,l=n.totalCount,o=a.dependencies,c=a.consistsOf;return{id:t,label:i,totalCount:l,dependencies:o.data.map((function(e){return{id:e.id}})),consistsOf:c.data.map((function(e){return{id:e.id}})),links:r}},E=r.a.createContext({}),v=function(e){var t=e.source,n=Object(a.useState)([]),i=p()(n,2),l=i[0],o=i[1],c=Object(a.useState)({}),u=p()(c,2),s=u[0],d=u[1],m=Object(a.useContext)(f.c).throwError,v=Object(g.a)(s).bulkUpdateMigrations,y=Object(b.b)({href:t,handleError:m}),j=y.isLoading,O=y.document;return Object(a.useEffect)((function(){O&&(d(O.links),o(O.data.map(h)))}),[O]),r.a.createElement(E.Provider,{value:{links:s,migrations:l,isLoading:j,bulkUpdateMigrations:v}},e.children)},y=n(2),j=function(e,t){switch(t.type){case"selectSingle":return e.includes(t.id)?e.filter((function(e){return e!==t.id})):[].concat(s()(e),[t.id]);case"selectAll":return e.length===t.list.length?[]:t.list}},O=function(e){var t=e.filter((function(e){var t=e.links;return Object(y.s)(t)})).map((function(e){return e.id})),n=Object(a.useReducer)(j,t),r=p()(n,2),i=r[0],l=r[1];return{checked:i.length===t.length,selections:i,selectAll:function(){l({type:"selectAll",list:t})},selectSingle:function(e){l({type:"selectSingle",id:e})}}},k=function(){var e=Object(o.useTracking)(),t=Object(a.useState)(!1),n=p()(t,2),i=n[0],l=n[1],c=Object(a.useState)(new Set),u=p()(c,2),d=u[0],f=u[1],b=Object(a.useState)(new Set),h=p()(b,2),v=h[0],j=h[1],k=Object(a.useContext)(E),w=k.migrations,S=k.links,_=Object(g.a)(),N=_.setLink,C=_.bulkUpdateMigrations,x=O(w),L=x.checked,M=x.selections,P=x.selectAll,D=x.selectSingle,A=w.reduce((function(e,t){return e[+M.includes(t.id)].push(t),e}),[[],[]]),T=p()(A,2),q=T[0],R=T[1],U=[{label:"Selected",count:M.length,modifier:"primary",description:r.a.createElement("span",null,r.a.createElement("strong",null,"Selected")," refers to migrations that you plan to run.")},{label:"Required",count:s()(d).filter((function(e){return!M.includes(e)})).length,modifier:"secondary",description:r.a.createElement("span",null,r.a.createElement("strong",null,"Required")," are dependencies of selected migrations.")},{label:"Skipped",count:q.length,modifier:"warning",description:r.a.createElement("span",{className:"migration__import-status-desc migration__warning"},"Migrations with ",r.a.createElement("strong",null,"0")," items are ",r.a.createElement("strong",null,"skipped")," ","by default, but you can choose to skip any others that you do not wish to import now.")}];return Object(a.useEffect)((function(){Object.values(S).length&&Object(y.r)(S)&&N(Object(y.j)(S)[0])}),[S]),Object(a.useEffect)((function(){f(M.reduce((function(e,t){return Object(y.a)(Object(y.f)(t,w),w).forEach((function(t){return e.add(t)})),e}),new Set))}),[M]),Object(a.useEffect)((function(){j(new Set([].concat(s()(d),s()(M))))}),[M,d]),r.a.createElement("form",{className:"preselect__list"},r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(m.a,{id:"allMigrations",options:{checked:L,disabled:!1},toggle:P})),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Number of Items"),r.a.createElement("th",null,"Dependencies"))),r.a.createElement("tbody",null,w.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(m.a,{id:e.id,options:{checked:M.includes(e.id)||d.has(e.id),disabled:Object(y.t)(e.links)||d.has(e.id)},toggle:function(){D(e.id)}})),r.a.createElement("td",null,e.label),r.a.createElement("td",null,0!==e.totalCount&&M.includes(e.id)?r.a.createElement("span",null,e.totalCount):r.a.createElement("span",{className:"migration__import-status migration__warning",title:"".concat(0===e.totalCount?"Migrations with 0 items are skipped by default":"".concat(e.totalCount," migrations will be skipped."))},e.totalCount)),r.a.createElement("td",null,Object(y.b)(e,w).map((function(e){return e.label})).join(", ")))}))))),r.a.createElement("div",{className:"preselect__start"},r.a.createElement("button",{type:"submit",disabled:i||0===v.size,className:"button button--primary",onClick:function(t){t.preventDefault(),l(!0);var n=Date.now();e.trackEvent({type:"Preselect started",preconfigSelectedQuantity:R.length,preconfigSkippedQuantity:q.length,preconfigSelectedRows:Object(y.D)(R,"totalCount"),preconfigSkippedRows:Object(y.D)(q,"totalCount"),preconfigSelectedList:R.map((function(e){return e.id})),preconfigSkippedList:q.map((function(e){return e.id})),preconfigSelectedUnderlyingList:Object(y.v)(R),preconfigSkippedUnderlyingList:Object(y.v)(q)}),C(w.map((function(e){var t=e.id;return{type:"migration",id:t,attributes:{skipped:!v.has(t)}}}))).then((function(t){e.trackEvent({type:"Preselect completed",preconfigDuration:Date.now()-n})}))}},"Start Migration"),v.size>0?r.a.createElement("strong",null,"(",v.size,") Selected items"):r.a.createElement("span",null,"No migrations selected")),r.a.createElement("div",{className:"panel panel--info"},r.a.createElement("div",{className:"panel__content"},r.a.createElement("div",{className:"preselection_summary"},U.filter((function(e){return e.count>0})).map((function(e){return r.a.createElement("div",{key:"".concat(e.label,"--count")},r.a.createElement("span",{className:"preselection_summary__count"},e.count),r.a.createElement("span",{className:"preselection_summary__label"},e.label))}))),U.filter((function(e){return e.count>0})).map((function(e){return r.a.createElement("p",{key:"".concat(e.label,"--desc")},e.description)})))))},w=function(){var e=Object(a.useContext)(E),t=e.migrations,n=e.links,i=e.isLoading;return t.length?Object(y.r)(n)?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,"Choose which parts of your source site you want to migrate into your new Drupal 9 site."),r.a.createElement("p",null,r.a.createElement("em",null,"Don't worry"),", you can still choose to bring over anything later that you skip now.")),r.a.createElement(k,null)):r.a.createElement("div",null,r.a.createElement("p",null,"Preselections made successfully."),Object(y.q)(n)?r.a.createElement("p",null,"Visit the dashboard to begin an initial import of supporting configuration. When that is complete, you may begin importing content."):r.a.createElement("p",null,"The initial import of your selected migrations is complete, you no longer need to visit this page."),r.a.createElement("a",{className:"button button--primary",href:"/upgrade/migrations"},"View Migrations Dashboard")):r.a.createElement("div",null,i?r.a.createElement("div",{className:"ajax-progress ajax-progress--throbber",role:"status"},r.a.createElement("div",{className:"ajax-progress__throbber"}),r.a.createElement("div",{className:"ajax-progress__message"},"Loadingâ€¦")):r.a.createElement("p",null,"No migrations available."))},S=n(26),_=n(29),N=new l.a,C=c()({},{dispatch:function(e){return N.logEvent(e)}})((function(e){var t=e.basepath,n=e.source;return r.a.createElement(v,{basepath:t,source:n},r.a.createElement("div",{className:"migrate-ui"},r.a.createElement(S.a,null,r.a.createElement(_.a,{title:"Select data to migrate"})),r.a.createElement("div",null,r.a.createElement(w,null))))})),x=n(43);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#decoupled-page-root"),t=e.getAttribute("data-module-path");n.p="/".concat(t,"/ui/dist/");var a=e.getAttribute("data-basepath"),o=e.getAttribute("data-source");(new l.a).init(e.getAttribute("data-tracking-api-key"),Object(x.a)(e),void 0),e&&Object(i.render)(r.a.createElement(C,{basepath:a,source:o}),e)}))}});